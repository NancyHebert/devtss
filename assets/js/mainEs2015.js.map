{"version":3,"sources":["main.js"],"names":["env","envs","locales","en","message","fr","Vue","use","VueI18n","defaultLanguage","$","attr","config","lang","Object","keys","forEach","locale","cutKeepingTags","elem","reqCount","grabText","missCount","contents","each","nodeType","Node","TEXT_NODE","data","substr","Math","min","length","ELEMENT_NODE","childPart","text","count","outerHTML","match","localName","component","props","template","computed","shortdesc","returnval","desc","truncate","$t","methods","inputText","truncated","outputText","html","tokenizeString","inputStringMixedCase","inputString","toLowerCase","terms","tokens","Set","vm","el","be_url","be","uniweb_url","uniweb","fomsso_url","fomsso","admitted","isAdmitted","allUnreadCount","alphabuttons","availabledate","clickedResearcher","clickedResearcherId","clickedResearcherName","code","conversationResearchers","conversationsEmail","createAccountFailed","cvStudent","currentDate","dateInThePast","email","emailInProgress","endDate","fromEmailLink","hasConversations","interestsChoices","internal","isAdmittedToProgram","isAvailable","key","levelOfInstruction","loading","loggedIn","loginFailed","loginState","messageSent","name","nextButtonDisabled","nextResearcherId","nextResearcherIndex","noNameAndPassword","password","passwordSent","prevButtonDisabled","prevResearcherId","prevResearcherIndex","profile","programs","rememberMe","researcherName","researcherList","researchersMasterInterestsList","researchers","researchersFiltered","role","selectedInterests","startDate","student","student_profile_array","student_profile","studentConversations","studentCv","studentHasCv","studentHasTranscripts","studentInSystem","studentProfilesByMonth","studentTranscripts","supervisorsInSystem","theResearcherTalkedToStudent","theSelectedLanguage","token","transcripts","transcriptsStudent","updateProfileFailed","userId","username","verificationCode","viewPasswordClicked","programAdmitted","created","getCurrentDate","retrieve","checkedYes","checkedNo","document","title","getResearchers","getStudent","getMessageList","remove","getStudentsInSystem","getSupervisors","getStudentProfileCreated","checkUrl","store","storeVariable","localVariable","sessionStorage","setItem","localStorage","retrieveVariable","retrieveValue","getItem","today","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","findResearcherInList","researcherId","researcher","id","n","len","ext","substring","lastIndexOf","filename","replace","isValidURL","str","a","createElement","href","hostname","host","window","location","changeResearcherAvailability","available_date","val","datepicker","format","autoclose","todayHighlight","setDate","on","changeDate","modal","viewProfile","viewConversations","uploadCv","event","student_username","files","target","file","FormData","append","modelRoute","encodeURIComponent","fileUrl","$http","post","headers","then","response","getCv","console","log","status","hidePassword","find","viewPassword","urlRoute","get","processCv","cv","fileObj","push","deleteCv","file_route","delete","uploadTranscripts","getTranscripts","processTranscripts","undefined","transcript","deleteTranscript","clickedTranscript","viewResearcherProfile","selectedResearcherId","researcherPositionTitle","researcherAcademicUnit","selR","membership_information","first_name","last_name","$nextTick","checkStudentTalkedToResearcher","index","talkedWith","parseInt","researcherid","login","contactResearcher","processResearcherAvailability","$set","selectedDate","removeClass","addClass","saveAvailability","availabilityContent","put","$forceUpdate","messageRead","read_date","toISOString","content","sendInitialMessage","researcher_uniweb_number","student_name","level_of_instruction","program_code","body","messageContent","is_from_student","researcher_name","trim","level_of_instruction_en","toUpperCase","level_of_instruction_fr","admitted_en","findInJson","admitted_fr","program_code_en","program_code_fr","is_draft","setTimeout","fadeTo","slideUp","hide","sendMessageFromStudent","messageId","messageBoxId","sendMessage","textareaId","confirmIncompleteProfile","updateProfile","createProfile","isConfirmed","profileContent","getAdmittedValue","getProfileCodeValue","url","show","is_admitted","item","parsed_program_code","isNaN","isFromEmail","application","err","readUserRole","credentials","user","parseJwt","updateStateEngine","addInterestToInterestChoices","theValue","theIndex","interestChoicesObj","prop","removeInterestFromInterestChoices","i","choice","splice","clearInterestsChoices","uncheckAll","onRefreshSearch","extractAlphaFilter","updateChecked","value","checked","createMasterInterestList","research_interests","anInterest","leaf","interest","selectedInterest","add","createInterestList","inArray","sort","s1","s2","l","m","toggleLanguage","newLang","getStudentProfile","process_student_profile","tssurl","checkProgramRadio","error","processUniwebFeed","onCancel","onCreateAccount","theurl","onVerifyEmail","onEmailPassword","newState","storeState","onResendEmail","getUrlParameter","action","onVerificationCodeEmail","onUpdatePasswordEmail","getMessageEmail","regex","RegExp","results","exec","search","decodeURIComponent","sent_date","send_date","onVerificationCode","onResetPassword","onChangePassword","processLinkLogin","messageList","getStudentConversations","getResearcherConversations","messageForThisResearcher","studentTalkedToResearcher","researcherID","filter","conversations","groupBy","studentname","studentArr","studentObj","unreadCount","mostRecentUpdate","studentHasReplied","firstTimeThroughLoop","conversation","is_from_Student","b","x","y","isUnread","formatDate","date","year","pad","month","day","formattedDate","numb","messagesForThisStudent","studentProfile","conversationArr","conversationObj","studentUsername","researcherHasReplied","position_title","academic_unit","array","f","groups","o","group","JSON","stringify","map","change","buildResearcherList","matchingResearchers","hasSearch","freeTextSearchString","searchTerms","freeTextSet","researchInterestSet","buildSearchterms","intersectFreeTextTerms","unionResearchInterests","intersect","researchersMatching_ThisTerm","union","term","setA","setB","has","jwtToken","base64Url","split","base64","parse","atob","logout","clear","onFilterFreetextClear","userRole","processRole","makeDate","prev","authorize","alphabet","alphabetButtons","alphaButtonArray","letter","researcherLastInitials","firstchar","charAt","_","includes","alphabutton","listOfResearchers","Promise","resolve","reject","researcherInterest","biography","bioEn","academic_biography","bioFr","research_description","descriptionEn","descriptionFr","selected_publications","articles","journal_articles","article_title","research_funding_history","fundingTitle","funding_title","project_description","fundingDescriptionEn","english","fundingDescriptionFr","french","searchTermsTokenized","onFilterFreetext","translateMonths","EnglishMonth","translateLevelOfInstruction","jsonArray","jsonObject","filterAlphabetical","letterOfAlphabet","returnList"],"mappings":"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","file":"mainEs2015.js","sourcesContent":["\"use strict\";\n\n// Make the application configuarable - later, this should happen during the build and be transparent to the programmer.\n// Later, this will be imported, and a different version of the file will be used for each build.\n\nvar env = 'staging';\n\nvar envs = {\n  'prod': {\n    'fomsso': 'https://fomsso.med.uottawa.ca',\n    'uniweb': 'https://uniweb-service.med.uottawa.ca',\n    'be': 'https://tss-be.med.uottawa.ca'\n  },\n  'staging': {\n    'fomsso': 'https://fomsso.med.uottawa.ca',\n    'uniweb': 'https://uniweb-service.med.uottawa.ca',\n    'be': 'https://tss-be.med.uottawa.ca'\n  }\n};\n\nvar locales = {\n  en: {\n    message: {\n      // \"ADMITTED-INTO\": \"Admitted into:\",\n      // \"ADMITTED\": \"Have you been admitted into a graduate program at Faculty of Medicine of the University of Ottawa?\",\n      \"ADMITTED\":\"Current status:\",\n      // \"ADMITTED-CURRENTLY\":\"I have been admitted\",\n      \"ADMITTED-STATUS\": \"Admitted status:\",\n      // \"APPLICATION-IN-PROCESS\": \"I have an application in process\",\n      \"ARTICLE-TITLE\": \"Article title:\",\n      // \"ASSISTANCE\": \"Need assistance? Visit\",\n      // \"ATTACH-ANOTHER\": \"attach another\",\n      // \"ATTACH\": \"attach\",\n      \"AVAILABLE-TO-SUPERVISE\": \"Available to supervise \",\n      // \"BELOW\": \"Below you will see a list of faculty members who are currently accepting students to supervise. Enter keywords to narrow down the list.\",\n      \"BIOGRAPHY\": \"Biography\",\n      \"CANCEL\": \"Cancel\",\n      \"CANNOT-SEND-MESSAGE-UNTIL-RESEACHER-RESPOND\": \"You will be able to send another message when the researcher has responded.\",\n      // \"CHANGE-AVAILABILITY\": \"Change availability\",\n      // \"CHANGE-PW\": \"Change your password\",\n      \"CHECK-INBOX\": \"Please check your inbox.\",\n      // \"CHOOSE-PW\": \"Please click the following link to choose a new password:\",\n      \"CLEAR\": \"Clear\",\n      \"CLOSE\": \"Close\",\n      // \"CODE\": \"Verification code:\",\n      \"COLON\": \":\",\n      \"CONFERENCE-DATE\": \"Conference Date:\",\n      \"CONFERENCE-NAME\": \"Conference Name:\",\n      \"CONFERENCE-TITLE\": \"Conference Title\",\n      \"CONFERENCE-PUBLICATIONS\": \"Conference Publications\",\n      \"CONT-CREATE\": \" where you may continue creating your account.\",\n      \"CONT-RESET\": \" where you may continue resetting your password.\",\n      // \"CONTACT-CONVERSATIONS\": \"View conversation with \",\n      \"CONTACT\": \"Contact\",\n      // \"CONTINUE-CREATING-ACCOUNT\": \"Please click the following link to continue creating your account:\",\n      \"CONTINUE\": \"Continue\",\n      // \"CONV-WITH\": \"Conversation with\",\n      \"CONVERSATIONS\": \"Conversations\",\n      \"CREATE-ACCOUNT\": \"Create account\",\n      \"CREATE-ACCOUNT-FAILED\": \"We have failed to create your account, please verify that the information entered is correct.\",\n      // \"CREATE-PW\": \"Enter a password:\",\n      \"CREATE-NEW-PW\": \"Create a password:\",\n      // \"CREATE-YOUR-ACCOUNT\": \"Create your account\",\n      \"CREATE-YOUR-PROFILE\": \"Create your profile\",\n      \"CURRENTLY-AVAILABLE\": \"Currently available to supervise \",\n      \"CV-WORD-PDF\": \"(Microsoft Word or PDF format):\",\n      \"CV\": \"CV:\",\n      \"DATE-IN-PAST\": \"Please choose a date in the future.\",\n      \"DELETE\": \"Delete\",\n      \"DEVELOPED-BY\": \"- Developed by Medtech \",\n      \"DO-HAVE\": \"I have a uOttawa username\",\n      \"DONT-FORGET\": \"Dont forget to:\",\n      \"DONT-HAVE\": \"I do not have a uOttawa username\",\n      \"EDIT-AVAILABILITY\": \"Edit availability\",\n      \"EDIT-NAME\": \"Edit name\",\n      // \"EDIT-ORGANIZATION-TYPE\": \"Edit Organization Type\",\n      \"EDIT-PROFILE\": \"Edit your profile\",\n      // \"EMAIL-SENT-VERIFICATION-CODE\": \" which contains a verification code needed to continue with creating your account.\",\n      // \"EMAIL-SENT\": \"An email message has been sent to \",\n      \"EMAIL\": \"Email address\",\n      \"EMAILED-LINK\": \"Weve emailed you a link at\",\n      \"ENGLISH\": \"English\",\n      // \"ENTER-EMAIL\": \"Enter your email:\",\n      // \"ENTER-EMAIL-ADDRESS\": \"enter your email address\",\n      \"ENTER-EMAIL-INSTRUCTIONS\": \"Enter your email address and press Continue, and we will check to see if an account exists for that email address.\",\n      \"ENTER-MESSAGE\": \"Enter your message below.\",\n      // \"ENTER-NAME\": \"enter name\",\n      // \"ENTER-NEW-PW\": \"Please enter your new password.\",\n      // \"ENTER-PASSWORD\": \"Please enter your password\",\n      // \"ENTER-PW\": \". Please enter your password.\",\n      // \"ENTER-VERIFICATION-CODE\": \"enter your verification code\",\n      // \"ENTER-YOUR-PASSWORD\": \"enter your password\",\n      // \"ERROR\": \"An error occurred while loading the researchers!\",\n      // \"EXISTING-ACCOUNT\": \"Not certain whether you have an existing account?\",\n      \"EXPORT-EXCEL\": \"Export to Excel\",\n      // \"EXT\": \"ext:\",\n      \"EXTERNAL\": \"external\",\n      \"FACULTY-ADDRESS\": \"Faculty of Medicine <br> Roger Guindon Hall<br> 451 Smyth Road <br> Room 2016<br> Ottawa, ON K1H 8M5\",\n      \"FACULTY-OF-MEDICINE\": \"Faculty of Medicine\",\n      // \"FILTER-INTERESTS\": \"Filter Interests:\",\n      \"FILTERED-INTERESTS\": \"Filtered Interests:\",\n      \"FOR-ASSISTANCE\": \" If you experience technical difficulties, please submit an \",\n      \"FORGOT-PW\": \"Forgot password\",\n      \"FREE-TEXT\": \"Free text search:\",\n      \"FRENCH\": \"Franais\",\n      // \"FUNDING-CLINICAL-RESEARCH\": \"Clinical research project: \",\n      \"FUNDING-END-DATE\": \"End date: \",\n      \"FUNDING-GRANT-TYPE\": \"Grant type: \",\n      \"FUNDING-TITLE\": \"Title: \",\n      \"FUNDING-PROJECT-DESCRIPTION\": \"Project description: \",\n      \"FUNDING-PROGRAM-NAME\": \"Program name: \",\n      \"FUNDING-PROGRAM-ORGANIZATION\": \"Program organization: \",\n      \"FUNDING-START-DATE\": \"Start date: \",\n      \"FUNDING-TYPE\": \"Funding type: \",\n      \"GO\": \"Go\",\n      \"GRAD-STUDIES\": \"Graduate and Postdoctoral Studies\",\n      \"GRAD-STUDIES-OFFICE\": \"Graduate and Postdoctoral Studies Office \",\n      \"GRANT\": \"Grants\",\n      // \"HAVE-OR-CREATE\": \", you must have or create an account. Not certain whether you have an existing account?\",\n      \"HELP-DESK\": \"online help request\",\n      \"HIDE-PW\": \"Hide password\",\n      // \"HOME\": \"Home\",\n      \"HOURS-DATE-SUMMER\": \"(June 1st to August 31st: <br> 9:00 am to 3:30 pm)\",\n      \"HOURS-DATE\": \"Monday to Friday <br> 9:00 am to 4:30 pm\",\n      \"HOURS\": \"Hours of Operation\",\n      \"IF-COPY-PASTE\": \"If you copied and pasted a link from an email, please make sure you didnt miss any characters, and try again.\",\n      \"IF-DONT-RECEIVE\": \"If you do not receive the email within an hour, we can\",\n      \"IF-NECESSARY\": \"*If necessary, add keywords to narrow down the list.\",\n      \"IN-ORDER-TO-CONTACT-RESEARCHER\": \"In order to contact a researcher,\",\n      \"IN-ORDER-TO-CONTACT\": \"In order to contact \",\n      \"INCLUDE-INFO\": \"Include information on your research experience and academic background\",\n      // \"INITIAL\": \"Initial communication with\",\n      \"INTERNAL\": \"internal\",\n      \"INTRODUCE\": \"Introduce yourself.\",\n      // \"INVALID-KEY\": \"Invalid key\",\n      \"IS-INVALID\": \" is invalid.\",\n      \"JOURNAL-ARTICLES\": \"Journal Articles\",\n      \"LANGUAGE-DISCLAIMER\": \"English version not available. French version follows:\",\n      // \"LANGUAGE-SELECTION\": \"Language selection\",\n      \"LAST-UPDATED\":\"Last updated: \",\n      \"LEVEL\": \"Level of study:\",\n      // \"LINK-AND-CODE\": \"A link and verification code have been sent to you at\",\n      \"LIST\": \"To see a list of potential thesis supervisors available to supervise, you must select keywords. If you know the professors name, select the first letter of his/her last name.\",\n      \"LOG-IN-FAILED\": \"The login failed with the credentials provided. Please reenter and try again.\",\n      // \"LOG-IN-FAILED-RESET\": \"The login failed with the credentials provided.\",\n      \"LOG-IN-OR-CREATE\": \" please log in (or create an account).\",\n      \"LOG-IN\": \"Log in\",\n      \"LOG-OUT\": \"Log out\",\n      // \"LOGIN-RESEARCHER\" : \"You must login to view your conversations\",\n      \"MANDATORY-FIELDS\": \"Name and password are required\",\n      \"MARK-READ\": \"Mark as read\",\n      \"MEAN\": \"Mean\",\n      \"MEAN-RESPONSE-TIME-DAYS\": \"Mean response time (days)\",\n      \"MEDIAN\": \"Median\",\n      \"MEDIAN-RESPONSE-TIME-DAYS\": \"Median response time (days)\",\n      // \"MESSAGE\": \"Message:\",\n      \"MESSAGE-SAVED\": \"Your message has been saved.\",\n      \"MESSAGE-SENT\":\"Your message was sent successfully.\",\n      \"MESSAGES-SENT\": \"Messages sent\",\n      \"MSC\": \"M.Sc.\",\n      \"NAME\": \"Name\",\n      // \"NEW-MESSAGES\": \" new messages\",\n      \"NEW-PW\": \"Welcome back to Thesis Supervisor Search. We recently received a request for a new password for this email address.\",\n      // \"NEW-UNREAD-MESSAGES\": \"You have new unread messages from \",\n      \"NEXT\": \"Next\",\n      \"NO\": \"No\",\n      // \"NO-NEW-UNREAD-MESSAGES\": \"You have no new messages from \",\n      // \"NOT-ADMITTED-YET\": \"Not currently accepted into a program\",\n      // \"NOT-APPLIED-YET\": \"I havent applied yet, but intend to do so shortly\",\n      // \"NOT-CURRENTLY-AVAILABLE\": \"I am not currently available to supervise\",\n      // \"NO-DATA-MESSAGE\": \"No information available at this time.\",\n      // \"NOT-LOGGED-IN\": \"You are not logged in\",\n      \"OUTDATED-BROWSER-MESSAGE-PARTI\": \"This application requires JavaScript capabilities that your browser does not support. Please contact us by email\",\n      \"OUTDATED-BROWSER-MESSAGE-PARTII\": \"or phone (613-562-5215) to learn more about our research.\",\n      \"PASSWORD\": \"Password:\",\n      \"PASSWORD-RESET\":\"where you can continue resetting your password. \",\n      \"PHD\": \"Ph.D.\",\n      // \"PHOTO-OF\": \"Photo of \",\n      \"PLEASE-NOTE\": \"*Please note that this tool is available in English only.\",\n      \"PREVIOUS\": \"Previous\",\n      // \"PROFILE\": \"Profile\",\n      \"PROFILE-CREATED\": \"Profiles created, by month (last 12 months)\",\n      \"PROFILE-CREATION\": \"Profile creation\",\n      \"PROFILE-INCOMPLETE\":\"Your profile is incomplete. Are you sure you want to continue?\",\n      \"PROGRAM\": \"Program:\",\n      \"PROOFREAD\": \"Proofread.\",\n      // \"PROVIDE-INFO\": \"Please provide some information about yourself.\",\n      \"PUBLICATION-DATE\": \"Publication date:\",\n      \"PUBLICATION-TITLE\": \"Publication title:\",\n      \"PUBLICATIONS\": \"Publications\",\n      // \"PW\": \"Password:\",\n      \"REMEMBER-ME\": \"Remember me\",\n      // \"REMOVE\": \"remove\",\n      \"REPORTS\": \"Reports\",\n      \"RESEARCH-DESCRIPTION\": \"Research Description\",\n      \"RESEARCH-INTERESTS\": \"Research interests\",\n      \"RESEARCHER-PROFILE\": \"Researcher profile\",\n      \"RESEND-EMAIL\": \"Resend Email\",\n      \"RESEND\": \"resend it to you\",\n      // \"RESET-IT\": \"Reset it \",\n      \"RESULT\": \" result*\",\n      \"RESULTS\": \" results*\",\n      // \"RGN\": \"Roger Guindon Hall\",\n      // \"ROOM\": \"Room\",\n      \"SAVE\": \"Save\",\n      \"SAVE-DRAFT\": \"Save draft\",\n      // \"SEARCH\": \"Search\",\n      \"SELECT-FIRST-LETTER\": \"OR Select the first letter of the professors last name:\",\n      \"SELECT-KEYWORDS\":\"Select one or more keywords that best describe your research interest:\",\n      \"SELECT-PROGRAM\": \"Select program\",\n      \"SELECT-RESEARCH\": \"Select research interests:\",\n      \"SEND-MESSAGE\": \"Send Message\",\n      \"SENT-ON\": \"Sent on: \",\n      \"SHOWING\": \"Below is the list of Faculty members - Showing \",\n      \"SKIP\": \"Skip to main content\",\n      // \"SMYTH\": \"451 Smyth Road\",\n      \"STARTING-FROM\":\"as of \",\n      \"STATE-INTERESTS\": \"State your interests clearly and how they match with the Faculty member.\",\n      \"STUDENT-IN-SYSTEM\": \"Students in the system\",\n      \"STUDENT-PROFILE\": \"Student profile\",\n      \"SUPERVISOR-RESPONSE\": \"Supervisor response time\",\n      \"THANK-YOU\": \"Thank you for your interest in the University of Ottawa!\",\n      \"TALKED-WITH\": \"Talked with\",\n      \"THE-KEY\": \"A problem has occurred: the key \",\n      \"THIS-ADDRESS-NOT-EXIST\": \" does not exist in our records. To proceed, click \\\"Create account\\\".\",\n      //\"THIS-ADDRESS-NOT-EXIST\": \" does not exist in our records. To proceed, click \\\"Create account\\\". A confirmation will be sent to this address.\",\n      \"THIS-ADDRESS\": \"This address \",\n      \"THIS-MESSAGE\": \"This message will be visible to administrators of the Graduate and Postdoctoral Studies Office of the Faculty of Medicine.\",\n      // \"THIS-PROFILE\": \"This profile will be visible to researchers you communicate with, as well as administrators of the Graduate and Postdoctoral Studies Office of the Faculty of Medicine.\",\n      // \"THIS-WILL-BE-USERNAME\": \"This will be your username.\",\n      \"TIPS\": \"Tips\",\n      \"TO-CONTACT\": \"To contact\",\n      // \"TO-RESET-PASSWORD\": \"To reset your password, please enter your new password.\",\n      // \"TOGGLE-NAVIGATION\": \"Toggle navigation\",\n      \"TOP\": \"Top of the page\",\n      \"TOTALS-AVERAGES\": \"Totals / averages\",\n      \"TRANSCRIPTS-WORD-PDF\": \"(Microsoft Word or PDF format. Unofficial transcripts are acceptable):\",\n      \"TRANSCRIPTS\": \"Transcripts: \",\n      // \"TRY-AGAIN\": \", and try again.\",\n      \"TSS\": \"Thesis Supervisor Search Tool\",\n      \"TY\": \"Thank You.\",\n      \"UNREAD\": \"Unread \",\n      \"UNRETURNED-CONTACTS\": \"Unreturned initial contacts\",\n      \"UNSELECT\":\"Uncheck all\",\n      \"UPLOAD-CV\":\"Upload a cv\",\n      \"UPLOAD-TRANSCRIPT\":\"Upload a transcript\",\n      \"USERNAME\": \"Username:\",\n      \"VERIFICATION\": \"Verification code:\" ,\n      \"VERIFICATION-SENT\":\"A link and verification code have been sent to you at \",\n      \"VIEW-CONVERSATIONS\": \"View conversations\",\n      // \"VIEW-MESSAGES\": \"View older messages\",\n      \"VIEW-PROFILE\": \"View profile\",\n      \"VIEW-PW\": \"View password\",\n      \"VIEWED-ON\": \"Viewed on: \",\n      // \"VISIBLE\": \"Replies will be visible to administrators of the Graduate and Postdoctoral Studies Office of the Faculty of Medicine.\",\n      \"VISIT-WEBSITE\": \"Visit website \",\n      // \"WE-WILL-GUIDE\": \"We will guide you through the search for your thesis supervisor.\",\n      // \"WE-WILL\": \"We will guide you through the search for your thesis supervisor.\",\n      \"WELCOME\": \"Welcome\",\n      // \"WELCOME-BACK\": \"Welcome back\",\n      // \"WELCOME-TO\": \"Welcome to Thesis Supervisor Search \",\n      // \"WHICH\": \"Which one?\",\n      \"YES\": \"Yes\",\n      // \"YOU-HAVE\": \"You have \",\n      // \"YOUR-CODE\": \"Your verification code is\"\n    }\n  },\n  fr: {\n    message: {\n      // \"ADMITTED-INTO\": \"Admis en :\",\n      // \"ADMITTED\": \"Avez-vous t admis dans un programme dtudes suprieures  la Facult de mdecine de lUniversit dOttawa?\",\n      \"ADMITTED\": \"Statut actuelle :\",\n      // \"ADMITTED-CURRENTLY\":\"J'ai t admis\",\n      \"ADMITTED-STATUS\": \"Statut d'admission :\",\n      // \"APPLICATION-IN-PROCESS\": \"J'ai une application en cours\",\n      \"ARTICLE-TITLE\": \"Le titre de l'article :\",\n      // \"ASSISTANCE\": \"Besoin daide? Visitez le\",\n      // \"ATTACH-ANOTHER\": \"joindre un autre relev\",\n      // \"ATTACH\": \"joindre\",\n      \"AVAILABLE-TO-SUPERVISE\": \"Disponible pour superviser \",\n      // \"BELOW\": \"Vous trouverez ci-dessous une liste des membres du corps professoral qui sont disponible pour diriger des tudiants. Entrez des mots-cls pour cibler votre recherche.\",\n      \"BIOGRAPHY\": \"Biographie\",\n      \"CANCEL\": \"Annuler\",\n      \"CANNOT-SEND-MESSAGE-UNTIL-RESEACHER-RESPOND\": \"Vous pourrez envoyer un autre message lorsque le professeur aura rpondu.\",\n      // \"CHANGE-AVAILABILITY\": \"Changer votre disponibilit\",\n      // \"CHANGE-PW\": \"Modifier votre mot de passe\",\n      \"CHECK-INBOX\": \"Veuillez vrifier votre bote de rception.\",\n      // \"CHOOSE-PW\": \"Cliquez sur le lien suivant pour choisir un nouveau mot de passe:\",\n      \"CLEAR\": \"Effacer\",\n      \"CLOSE\": \"Fermer\",\n      // \"CODE\": \"Code de vrification:\",\n      \"COLON\": \" :\",\n      \"CONFERENCE-DATE\": \"Date de la confrence :\",\n      \"CONFERENCE-NAME\": \"Nom de la confrence :\",\n      \"CONFERENCE-TITLE\": \"Titre de la confrence :\",\n      \"CONFERENCE-PUBLICATIONS\": \"Articles de confrence\",\n      \"CONT-CREATE\": \". Vous pourrez poursuivre la cration de votre compte.\",\n      \"CONT-RESET\": \". Vous pourrez poursuivre la rinitialisation de votre mot de passe.\",\n      // \"CONTACT-CONVERSATIONS\": \"Voir la discussion avec \",\n      \"CONTACT\": \"Contacter\",\n      // \"CONTINUE-CREATING-ACCOUNT\": \"Cliquez sur le lien suivant pour poursuivre la cration de votre compte:\",\n      \"CONTINUE\": \"Continuer\",\n      // \"CONV-WITH\": \"Conversation avec\",\n      \"CONVERSATIONS\": \"Conversations\",\n      \"CREATE-ACCOUNT\": \"Crer un compte\",\n      \"CREATE-ACCOUNT-FAILED\": \"Nous n'avons pas russi  crer votre compte, vrifiez que les informations saisies sont correctes.\",\n      // \"CREATE-PW\": \"Entrer un mot de passe:\",\n      \"CREATE-NEW-PW\": \"Crer un mot de passe :\",\n      // \"CREATE-YOUR-ACCOUNT\": \"Crer un compte\",\n      \"CREATE-YOUR-PROFILE\": \"Crez votre profil\",\n      \"CURRENTLY-AVAILABLE\": \"Je suis actuellement disponible pour superviser \",\n      \"CV-WORD-PDF\": \"(format Microsoft Word ou PDF):\",\n      \"CV\": \"CV :\",\n      \"DATE-IN-PAST\": \"Veuillez choisir une date dans le futur.\",\n      \"DELETE\": \"Enlever\",\n      \"DEVELOPED-BY\": \" - Dvelopp par Medtech \",\n      \"DO-HAVE\": \"Jai un nom dutilisateur uOttawa\",\n      \"DONT-FORGET\": \"Noubliez pas de:\",\n      \"DONT-HAVE\": \"Je nai pas de nom dutilisateur uOttawa\",\n      \"EDIT-AVAILABILITY\": \"Modifier la disponibilit\",\n      \"EDIT-NAME\": \"modifier votre nom\",\n      // \"EDIT-ORGANIZATION-TYPE\": \"Modifier le type d'organisation\",\n      \"EDIT-PROFILE\": \"Modifier votre profil\",\n      // \"EMAIL-SENT-VERIFICATION-CODE\": \" qui contient un code de vrification ncessaire pour poursuivre la cration de votre compte.\",\n      // \"EMAIL-SENT\": \"Un courriel a t envoy  \",\n      \"EMAIL\": \"Adresse courriel\",\n      \"EMAILED-LINK\": \"Nous avons envoy un lien \",\n      \"ENGLISH\": \"English\",\n      // \"ENTER-EMAIL\": \"Entrez votre adresse courriel:\",\n      // \"ENTER-EMAIL-ADDRESS\": \"entrer votre adresse courriel\",\n      \"ENTER-EMAIL-INSTRUCTIONS\": \"Entrez votre adresse courriel et appuyez sur continuer, et nous allons vrifier pour voir si un compte existe pour cette adresse courriel.\",\n      \"ENTER-MESSAGE\": \"Inscrivez votre message ci-dessous.\",\n      // \"ENTER-NAME\": \"entrez le nom\",\n      // \"ENTER-NEW-PW\": \"Entrer votre nouveau mot de passe.\",\n      // \"ENTER-PASSWORD\": \"Entrez votre mot de passe\",\n      // \"ENTER-PW\": \". Entrez votre mot de passe.\",\n      // \"ENTER-VERIFICATION-CODE\": \"entrer votre code de vrification\",\n      // \"ENTER-YOUR-PASSWORD\": \"entrer votre mot de passe\",\n      // \"ERROR\": \"Une erreur est survenue lors du chargement des chercheurs!\",\n      // \"EXISTING-ACCOUNT\": \"Vous ne savez pas si vous avez un compte?\",\n      \"EXPORT-EXCEL\": \"Exporter vers Excel (anglais seulement)\",\n      // \"EXT\": \"poste :\",\n      \"EXTERNAL\": \"externes\",\n      \"FACULTY-ADDRESS\": \"Facult de mdecine <br> Pavillon Roger-Guindon <br> 451, ch. Smyth, pice 2016 <br> Ottawa, ON K1H 8M5\",\n      \"FACULTY-OF-MEDICINE\": \"Facult de mdecine\",\n      // \"FILTER-INTERESTS\": \"Filtrer les intrts :\",\n      \"FILTERED-INTERESTS\": \"Les intrts filtrs:\",\n      \"FOR-ASSISTANCE\": \"Si vous prouvez des difficults techniques, veuillez remplir le \",\n      \"FORGOT-PW\": \"Jai oubli mon mot de passe\",\n      \"FREE-TEXT\": \"Recherche en texte libre :\",\n      \"FRENCH\": \"Franais\",\n      // \"FUNDING-CLINICAL-RESEARCH\": \"Projet de recherche clinique : \",\n      \"FUNDING-END-DATE\": \"Date de fin : \",\n      \"FUNDING-GRANT-TYPE\": \"Type de subvention : \",\n      \"FUNDING-TITLE\": \"Titre : \",\n      \"FUNDING-PROJECT-DESCRIPTION\": \"Description du projet : \",\n      \"FUNDING-PROGRAM-NAME\": \"Nom du programme : \",\n      \"FUNDING-PROGRAM-ORGANIZATION\": \"Organisation du programme : \",\n      \"FUNDING-START-DATE\": \"Date de dbut : \",\n      \"FUNDING-TYPE\": \"Type de financement : \",\n      \"GO\": \"Allez-y\",\n      \"GRAD-STUDIES\": \"Bureau des tudes suprieures et postdoctorales\",\n      \"GRAD-STUDIES-OFFICE\": \"Bureau des tudes suprieures et postdoctorales\",\n      \"GRANT\": \"Subventions\",\n      // \"HAVE-OR-CREATE\": \", vous devez possder un compte ou en crer un.\",\n      \"HELP-DESK\": \"formulaire de demande dassistance\",\n      \"HIDE-PW\": \"cacher le mot de passe\",\n      // \"HOME\": \"Accueil\",\n      \"HOURS-DATE-SUMMER\": \"(du 1er juin au 31 aot : <br> de 9 h  15h30)\",\n      \"HOURS-DATE\": \"du lundi au vendredi <br> de 9 h  16h30\",\n      \"HOURS\": \"Heures d'ouverture\",\n      \"IF-COPY-PASTE\": \"Si vous avez copi-coll le lien depuis un courriel, veuillez vrifier si vous avez slectionn tous les caractres, puis ressayez.\",\n      \"IF-DONT-RECEIVE\": \"Si vous ne recevez pas le courriel dans lheure qui suit, nous pouvons vous\",\n      \"IF-NECESSARY\": \"*Au besoin, ajouter des mots-cls afin de raffiner votre recherche.\",\n      \"IN-ORDER-TO-CONTACT-RESEARCHER\": \"Pour communiquer avec des professeurs, \",\n      \"IN-ORDER-TO-CONTACT\": \"Pour communiquer avec \",\n      \"INCLUDE-INFO\": \"ajouter des informations sur votre exprience de recherche et votre formation universitaire;\",\n      // \"INITIAL\": \"Communication initiale avec\",\n      \"INTERNAL\": \"internes\",\n      \"INTRODUCE\": \"vous presenter;\",\n      // \"INVALID-KEY\": \"Cl non valide\",\n      \"IS-INVALID\": \" nest pas valide.\",\n      \"JOURNAL-ARTICLES\": \"Articles de revue\",\n      \"LANGUAGE-DISCLAIMER\": \"Version franaise non disponible. Version anglaise suit :\",\n      // \"LANGUAGE-SELECTION\": \"Slection de la langue\",\n      \"LAST-UPDATED\": \"Dernire mise  jour : \",\n      \"LEVEL\": \"Niveau dtudes:\",\n      // \"LINK-AND-CODE\": \"Un lien et un code de vrification ont t envoys \",\n      \"LIST\": \"Faites une recherche  laide de mots-cls afin de voir la liste des superviseurs disponibles. Si vous connaissez le nom du professeur, faites une recherche en choisissez la premire lettre du nom de famille de celui-ci.\",\n      \"LOG-IN-FAILED\": \"La connexion a chou avec les informations d'identification que vous avez fournies. S'il vous plat re entrer et essayer  nouveau.\",\n      // \"LOG-IN-FAILED-RESET\": \"La connexion a chou avec les informations d'identification que vous avez fournies.\",\n      \"LOG-IN-OR-CREATE\": \"ouvrir une session (ou crez-vous un compte).\",\n      \"LOG-IN\": \"Ouvrez une session\",\n      \"LOG-OUT\": \"Se dconnecter\",\n      // \"LOGIN-RESEARCHER\" : \"Vous devez vous connecter pour voir vos conversations\",\n      \"MANDATORY-FIELDS\": \"Le nom et le mot de passe sont obligatoires.\",\n      \"MARK-READ\": \"Marqu comme lu\",\n      \"MEAN\": \"Valeur moyenne\",\n      \"MEAN-RESPONSE-TIME-DAYS\": \"Temps de rponse moyen (jours)\",\n      \"MEDIAN\": \"Valeur mdiane\",\n      \"MEDIAN-RESPONSE-TIME-DAYS\": \"Temps de rponse mdiane (jours)\",\n      // \"MESSAGE\": \"Message :\",\n      \"MESSAGE-SAVED\": \"Votre message a t sauvergad.\",\n      \"MESSAGE-SENT\":\"Votre message a bien t envoy.\",\n      \"MESSAGES-SENT\": \"Messages envoys\",\n      \"MSC\": \"M. Sc.\",\n      \"NAME\": \"Nom\",\n      // \"NEW-MESSAGES\": \" nouveaux messages\",\n      \"NEW-PW\": \"Bienvenue dans loutil de recherche dun directeur de thse. Nous avons reu rcemment une demande de nouveau mot de passe  cette adresse courriel.\",\n      // \"NEW-UNREAD-MESSAGES\": \"Vous avez de nouveaux messages non lus de \",\n      \"NEXT\": \"Suivant\",\n      \"NO\": \"Non\",\n      // \"NO-NEW-UNREAD-MESSAGES\": \"Vous n'avez pas de nouveaux messages non lus de \",\n      // \"NOT-ADMITTED-YET\": \"Pas actuellement admis  un programme.\",\n      // \"NOT-APPLIED-YET\": \"Je n'ai pas encore postul, mais j'ai l'intention de le faire sous peu\",\n      // \"NOT-CURRENTLY-AVAILABLE\": \"Je ne suis pas actuellement disponible pour superviser\",\n      // \"NO-DATA-MESSAGE\": \"Aucune information disponible\",\n      // \"NOT-LOGGED-IN\": \"Vous n'tes pas connect\",\n      \"OUTDATED-BROWSER-MESSAGE-PARTI\": \"Cette application ncessite des fonctionnalits JavaScript que votre navigateur ne prend pas en charge. Contactez-nous par courrier lectronique\",\n      \"OUTDATED-BROWSER-MESSAGE-PARTII\": \"ou par tlphone au 613-562-5215 pour en savoir plus sur notre recherche.\",\n      \"PASSWORD\": \"Mot de passe :\",\n      \"PASSWORD-RESET\":\"Vous pourrez ds lors poursuivre la rinitialisation de votre mot de passe. \",\n      \"PHD\": \"Ph. D.\",\n      // \"PHOTO-OF\": \"Photo de \",\n      \"PLEASE-NOTE\": \"*Veuillez noter que cet outil est disponible en anglais seulement.\",\n      \"PREVIOUS\": \"Prcdent\",\n      // \"PROFILE\": \"Profil\",\n      \"PROFILE-CREATED\": \"Profils crs, par mois (derniers 12 mois)\",\n      \"PROFILE-CREATION\": \"Cration de profil\",\n      \"PROFILE-INCOMPLETE\":\"Votre profile est incomplet. tes-vous certains que vous voulez continuer? \",\n      \"PROGRAM\": \"Programme :\",\n      \"PROOFREAD\": \"Passer en revue votre demande.\",\n      // \"PROVIDE-INFO\": \"Veuillez fournir des informations sur vous.\",\n      \"PUBLICATION-DATE\": \"Date de la publication :\",\n      \"PUBLICATION-TITLE\": \"Titre de la publication :\",\n      \"PUBLICATIONS\": \"Publications\",\n      // \"PW\": \"Mot de passe :\",\n      \"REMEMBER-ME\": \"Se souvenir de moi\",\n      // \"REMOVE\": \"supprimer\",\n      \"REPORTS\": \"Rapports\",\n      \"RESEARCH-DESCRIPTION\": \"Description de la recherche\",\n      \"RESEARCH-INTERESTS\": \"Intrts de recherche\",\n      \"RESEARCHER-PROFILE\": \"Profil du superviseur \",\n      \"RESEND-EMAIL\": \"Envoyer le courriel  nouveau\",\n      \"RESEND\": \"lenvoyer  nouveau\",\n      // \"RESET-IT\": \"Rinitialiser le \",\n      \"RESULT\": \" rsultat*\",\n      \"RESULTS\": \" rsultats*\",\n      // \"RGN\": \"Pavillon Roger-Guindon\",\n      // \"ROOM\": \"Pice\",\n      \"SAVE\": \"Sauvegarder\",\n      \"SAVE-DRAFT\": \"Sauvegarder un brouillon\",\n      // \"SEARCH\": \"Recherche\",\n      \"SELECT-FIRST-LETTER\": \"OU Choisissez la premire lettre du nom de famille du professeur:\",\n      \"SELECT-KEYWORDS\":\"Choisissez un ou des mots-cls* dcrivant le mieux vos intrts de recherche : \",\n      \"SELECT-PROGRAM\": \"Slectionnez un programme\",\n      \"SELECT-RESEARCH\": \"Slectionnez des intrts de recherche:\",\n      \"SEND-MESSAGE\": \"Envoyer le message\",\n      \"SENT-ON\": \"Envoy le : \",\n      \"SHOWING\": \"Liste des membres du corps professoral  Affichage de \",\n      \"SKIP\": \"Passer au contenu principal\",\n      // \"SMYTH\": \"451 chemin smyth\",\n      \"STARTING-FROM\":\" partir de : \",\n      \"STATE-INTERESTS\": \"indiquer clairement vos intrts et leur lien avec le professeur ou la professeure;\",\n      \"STUDENT-IN-SYSTEM\": \"tudiants dans le systme\",\n      \"STUDENT-PROFILE\": \"Profil de ltudiant\",\n      \"SUPERVISOR-RESPONSE\": \"Temps de rponse du superviseur\",\n      \"THANK-YOU\": \"Nous vous remercions de lintrt que vous tmoignez envers lUniversit dOttawa!\",\n      \"TALKED-WITH\": \"A parl avec\",\n      \"THE-KEY\": \"Un problme est survenu: la cl \",\n      \"THIS-ADDRESS-NOT-EXIST\": \" napparat pas dans nos dossiers. Pour continuer, cliquez sur Crer un compte.\",\n      //\"THIS-ADDRESS-NOT-EXIST\": \" napparat pas dans nos dossiers. Pour continuer, cliquez sur Crer un compte. Un message de confirmation sera envoy  cette adresse.\",\n      \"THIS-ADDRESS\": \"Cette adresse \",\n      \"THIS-MESSAGE\": \"Ce message sera visible pour les administrateurs du Bureau des tudes suprieures et postdoctorales de la Facult de mdecine.\",\n      // \"THIS-PROFILE\": \"Ce profil sera visible pour les chercheurs avec lesquels vous communiquerez, de mme que pour les administrateurs du Bureau des tudes suprieures et postdoctorales de la Facult de mdecine.\",\n      // \"THIS-WILL-BE-USERNAME\": \"Ce sera votre nom dutilisateur.\",\n      \"TIPS\": \"Conseils\",\n      \"TO-CONTACT\": \"Pour communiquer avec\",\n      // \"TO-RESET-PASSWORD\": \"S'il vous plat entrer votre nouveau mot de passe afain de rinitialisation de votre mot de passe.\",\n      // \"TOGGLE-NAVIGATION\": \"Basculer la navigation\",\n      \"TOP\": \"Haut de la page\",\n      \"TOTALS-AVERAGES\": \"Totaux / moyennes\",\n      \"TRANSCRIPTS-WORD-PDF\": \"(format Microsoft Word ou PDF. Les relevs de notes nonofficiels sont accepts):\",\n      \"TRANSCRIPTS\": \"Relevs de notes :\",\n      // \"TRY-AGAIN\": \", essayez de nouveau.\",\n      \"TSS\": \"Outil de recherche pour trouver un directeur de thse\",\n      \"TY\": \"Merci.\",\n      \"UNSELECT\":\"Dcocher tout\",\n      \"UNREAD\": \"Non lus \",\n      \"UNRETURNED-CONTACTS\": \"Messages initiaux non retourns\",\n      \"UPLOAD-CV\":\"Tlcharger un cv\",\n      \"UPLOAD-TRANSCRIPT\":\"Tlcharger un relevs de notes \",\n      \"USERNAME\": \"Nom dutilisateur:\",\n      \"VERIFICATION\": \"Code de vrification :\",\n      \"VERIFICATION-SENT\":\"Un lien et un code de vrification ont t envoys  \",\n      \"VIEW-CONVERSATIONS\": \"Voir les conversations\",\n      // \"VIEW-MESSAGES\": \"Voir anciens messages\",\n      \"VIEW-PROFILE\": \"Voir le profil\",\n      \"VIEW-PW\": \"voir le mot de passe\",\n      \"VIEWED-ON\": \"Lu le : \",\n      // \"VISIBLE\": \"Les rponses seront visibles pour les administrateurs du Bureau des tudes suprieures et postdoctorales de la Facult de mdecine.\",\n      \"VISIT-WEBSITE\": \"Visitez le site internet \",\n      // \"WE-WILL-GUIDE\": \"Nous vous guiderons au long du processus de recherche dun directeur de thse.\",\n      // \"WE-WILL\": \"Nous vous guiderons au long du processus de recherche dun directeur de thse.\",\n      \"WELCOME\": \"Bienvenue\",\n      // \"WELCOME-BACK\": \"Bienvenue\",\n      // \"WELCOME-TO\": \"Bienvenue dans loutil de recherche dun directeur de thse\",\n      // \"WHICH\": \"Lequel?\",\n      \"YES\": \"Oui\",\n      // \"YOU-HAVE\": \"Vous avez \",\n      // \"YOUR-CODE\": \"Votre code de vrification est\"\n    }\n  }\n};\n\n// install plugin\nVue.use(VueI18n);\n\n// set lang\nvar defaultLanguage = $('html').attr('lang');\nVue.config.lang = defaultLanguage;\n\n// set locales\nObject.keys(locales).forEach(function(lang) {\n  Vue.locale(lang, locales[lang]);\n});\n\n// Text truncation function, found at http://codereview.stackexchange.com/questions/92801/truncating-text-with-jquery-but-keep-the-html-formatting\nfunction cutKeepingTags (elem, reqCount) {\n  var grabText = '';\n  var missCount = reqCount;\n  $(elem).contents().each(function() {\n    switch (this.nodeType) {\n      case Node.TEXT_NODE:\n        // Get node text, limited to missCount.\n        grabText += this.data.substr(0,missCount);\n        missCount -= Math.min(this.data.length, missCount);\n        break;\n      case Node.ELEMENT_NODE:\n        // Explore current child:\n        var childPart = cutKeepingTags(this, missCount);\n        grabText += childPart.text;\n        missCount -= childPart.count;\n        break;\n    }\n    if (missCount == 0) {\n      // We got text enough, stop looping.\n      return false;\n    }\n  });\n  return {\n    text:\n      // Wrap text using current elem tag.\n      elem.outerHTML.match(/^<[^>]+>/m)[0]\n      + grabText\n      + '</' + elem.localName + '>',\n    count: reqCount - missCount\n  };\n}\n\nVue.component('short-description', {\n  props: ['desc', 'lang'],\n  template: '<div v-html=shortdesc></div>',\n\n  computed: {\n    shortdesc: function() {\n      var returnval;\n      if (this.lang === 'fr') {\n        if (this.desc.fr) {\n          returnval = this.truncate(this.desc.fr,300);\n        } else {\n          returnval = '<div class=\"disclaimer\">' + this.$t(\"message.LANGUAGE-DISCLAIMER\") + '</div>' + this.truncate(this.desc.en,300);\n        }\n      } else {\n        if (this.desc.en) {\n          returnval = this.truncate(this.desc.en,300);\n        } else {\n          returnval = '<div class=\"disclaimer\">' + this.$t(\"message.LANGUAGE-DISCLAIMER\") + '</div>' + this.truncate(this.desc.fr,300);\n        }\n      }\n      return returnval;\n    }\n  },\n\n  methods: {\n    truncate: function(inputText, reqCount) {\n      var elem = $(\"<div>\"+inputText+\"</div>\")[0]; // Convert string into JQuery object\n      var truncated = cutKeepingTags(elem, reqCount);\n      var outputText = $(truncated.text).html();\n      if (truncated.count == reqCount) { // Text was (probably) truncated\n        return outputText + \"&hellip;\";\n      } else {\n        return outputText;\n      }\n    }\n  }\n});\n\nfunction tokenizeString(inputStringMixedCase) {\n  //set variable for freeText array\n  var inputString = inputStringMixedCase.toLowerCase();\n  var terms = inputString.match(/([a-z0-9_]|-)+/g);\n\n  var tokens = new Set(terms);\n  return tokens;\n}\n\nvar vm = new Vue({\n  el: '#app',\n\n  data: {\n    // Assign to variables to use in the code\n    be_url: envs[env].be,\n    uniweb_url: envs[env].uniweb,\n    fomsso_url: envs[env].fomsso,\n    admitted: '',\n    isAdmitted: [],\n    allUnreadCount: 0,\n    alphabuttons: [],\n    availabledate: null,\n    clickedResearcher: null,\n    clickedResearcherId: '',\n    clickedResearcherName: '',\n    code: '',\n    conversationResearchers: [],\n    conversationsEmail: [],\n    createAccountFailed: false,\n    cvStudent: {},\n    currentDate: null,\n    dateInThePast: false,\n    email: null,\n    emailInProgress: false,\n    endDate: null,\n    fromEmailLink: false,\n    hasConversations: false,\n    interestsChoices: [],\n    internal: '', // String version of 'false', needed in 'created' method\n    isAdmittedToProgram: false,\n    isAvailable: false,\n    key: '12345',\n    levelOfInstruction: '',\n    loading: true,\n    loggedIn: '', // String version of 'false', needed in 'created' method\n    loginFailed: false,\n    loginState: 'notStarted',\n    message: '',\n    messageSent: false,\n    name: '',\n    nextButtonDisabled: false,\n    nextResearcherId: \"\",\n    nextResearcherIndex: 0,\n    noNameAndPassword: false,\n    password: '',\n    passwordSent: false,\n    prevButtonDisabled: false,\n    prevResearcherId: \"\",\n    prevResearcherIndex: 0,\n    profile: '', // String version of 'false', needed in 'created' method\n    programs: [],\n    rememberMe: false,\n    researcherName: '',\n    researcherList: new Set(),\n    researchersMasterInterestsList: new Set(),\n    researchers : [],\n    researchersFiltered: [],\n    role: '',\n    selectedInterests: [],\n    startDate: null,\n    student: null,\n    student_profile_array: [],\n    student_profile: null,\n    studentConversations: [],\n    studentCv: [],\n    studentHasCv: false,\n    studentHasTranscripts: false,\n    studentInSystem: null,\n    studentProfilesByMonth: null,\n    studentTranscripts: [],\n    supervisorsInSystem: null,\n    theResearcherTalkedToStudent: false,\n    theSelectedLanguage: 'en',\n    token: {},\n    transcripts: {},\n    transcriptsStudent: {},\n    updateProfileFailed:false,\n    userId: '',\n    username: '',\n    verificationCode: '',\n    viewPasswordClicked: false,\n    programAdmitted: 0\n  },\n\n  created: function() {\n    this.currentDate = this.getCurrentDate();\n    this.name = this.retrieve('name', this.name);\n    this.email = this.retrieve('email',this.email);\n    this.role = this.retrieve('role',this.role);\n    this.code = this.retrieve('verificationCode', this.code);\n    this.userId = this.retrieve('userId',this.userId);\n    this.username = this.retrieve('username', this.username);\n    this.availabledate = this.retrieve('availabledate', this.availabledate);\n    this.internal = (this.retrieve('internal',this.internal) === 'true'); // Convert to boolean.\n    this.loggedIn = (this.retrieve('loggedIn',this.loggedIn) === 'true'); // Convert to boolean.\n    this.loginState = this.retrieve('loginState',this.loginState);\n    this.profile = (this.retrieve('profile',this.profile) === 'true'); // Convert to boolean.\n    this.hasConversations = (this.retrieve('hasConversations',this.hasConversations) === 'true'); // Convert to boolean.\n    this.allUnreadCount = this.retrieve('allUnreadCount',this.allUnreadCount);\n    this.rememberMe = this.retrieve('rememberMe',this.rememberMe);\n    this.theSelectedLanguage = this.retrieve('theSelectedLanguage',this.theSelectedLanguage);\n    this.checkedYes = this.retrieve('admittedToProgram' , this.checkedYes);\n    this.checkedNo = this.retrieve('notAdmittedToProgram' , this.checkedNo);\n    this.levelOfInstruction = this.retrieve('levelOfInstruction',this.levelOfInstruction);\n    this.programAdmitted = this.retrieve('programAdmitted',this.programAdmitted);\n    this.admitted = this.retrieve('admitted',this.admitted);\n    this.isAdmittedToProgram = this.retrieve('isAdmittedToProgram',this.isAdmittedToProgram);\n\n    this.isAdmitted = [\n      {\n        \"code\": 1,\n        \"name\": \"I have been admitted\",\n        \"lang\": \"en\"\n      },\n      {\n        \"code\": 2,\n        \"name\": \"I havent applied yet, but intend to do so shortly\",\n        \"lang\": \"en\"\n      },\n      {\n        \"code\": 3,\n        \"name\": \"I have an application in process\",\n        \"lang\": \"en\"\n      },\n      {\n        \"code\": 1,\n        \"name\": \"J'ai t admis\",\n        \"lang\": \"fr\"\n      },\n      {\n        \"code\": 2,\n        \"name\": \"Je n'ai pas encore postul, mais j'ai l'intention de le faire sous peu\",\n        \"lang\": \"fr\"\n      },\n      {\n        \"code\": 3,\n        \"name\": \"J'ai une application en cours\",\n        \"lang\": \"fr\"\n      }\n    ];\n    this.programs = [\n      {\n        \"code\": 1,\n        \"name\": \"Biochemistry\",\n        \"lang\": \"en\"\n      },\n      {\n        \"code\": 2,\n        \"name\": \"Cellular and Molecular Medicine\",\n        \"lang\": \"en\"\n      },\n      {\n        \"code\": 3,\n        \"name\": \"Epidemiology\",\n        \"lang\": \"en\"\n      },\n      {\n        \"code\": 4,\n        \"name\": \"Microbiology and Immunology\",\n        \"lang\": \"en\"\n      },\n      {\n        \"code\": 5,\n        \"name\": \"Neuroscience\",\n        \"lang\": \"en\"\n      },\n      {\n        \"code\": 1,\n        \"name\": \"Biochimie\",\n        \"lang\": \"fr\"\n      },\n      {\n        \"code\": 2,\n        \"name\": \"M\\u00e9decine cellulaire et mol\\u00e9culaire\",\n        \"lang\": \"fr\"\n      },\n      {\n        \"code\": 3,\n        \"name\": \"\\u00c9pid\\u00e9miologie\",\n        \"lang\": \"fr\"\n      },\n      {\n        \"code\": 4,\n        \"name\": \"Microbiologie et immunologie\",\n        \"lang\": \"fr\"\n      },\n      {\n        \"code\": 5,\n        \"name\": \"Neurosciences\",\n        \"lang\": \"fr\"\n      }\n    ];\n\n    // set lang\n    $('html').attr('lang', this.theSelectedLanguage);\n    Vue.config.lang = this.theSelectedLanguage;\n    document.title = 'uOttawa ' + this.$t('message.FACULTY-OF-MEDICINE') + ' ' + this.$t('message.TSS'); // Keep this synchronized with the actual <title> element please\n\n    if (this.role == 'student') {\n      this.getResearchers();\n      this.getStudent(this.email); // Includes a call to this.getMessageList()\n\n    } else if (this.role == 'researcher') {\n      this.getResearchers();\n      this.getMessageList();\n\n    } else if (this.role == 'admin') {\n      $('#loading-message').remove();\n      this.getStudentsInSystem();\n      this.getSupervisors();\n      this.getStudentProfileCreated();\n      this.checkUrl();\n\n    } else {\n      // User not signed in\n      this.getResearchers();\n      this.checkUrl();\n    }\n  },\n\n  methods: {\n\n    store: function(storeVariable, localVariable) {\n      sessionStorage.setItem(storeVariable,localVariable);\n      if (this.rememberMe) {\n        localStorage.setItem(storeVariable,localVariable);\n      }\n    },\n\n    retrieve: function(retrieveVariable, localVariable) {\n      var retrieveValue = localStorage.getItem(retrieveVariable);\n      if (retrieveValue === null) {\n        retrieveValue = sessionStorage.getItem(retrieveVariable);\n        if (retrieveValue === null) {\n          retrieveValue = localVariable;\n        }\n      }\n      return retrieveValue;\n    },\n\n    getCurrentDate: function() {\n      var today = new Date();\n      var dd = today.getDate();\n      var mm = today.getMonth()+1; //January is 0!\n      var yyyy = today.getFullYear();\n      if (dd<10) {\n          dd='0'+dd;\n      }\n      if (mm<10) {\n          mm='0'+mm;\n      }\n\n      var currentDate = yyyy+'-'+mm+'-'+dd;\n      return currentDate;\n    },\n\n    findResearcherInList: function(researcherId) {\n      this.researchers.forEach(function(researcher) {\n        if (researcher.id == researcherId) {\n          return researcher;\n        }\n      });\n    },\n\n    truncate: function(n, len) {\n      var ext = n.substring(n.lastIndexOf(\".\") + 1, n.length).toLowerCase();\n      var filename = n.replace('.'+ext,'');\n      if (filename.length <= len) {\n          return n;\n      }\n      filename = filename.substr(0, len) + (n.length > len ? '[...]' : '');\n      return filename + '.' + ext;\n    },\n\n    isValidURL: function(str) {\n      var a = document.createElement('a');\n      a.href = str;\n      return (a.hostname && a.host != window.location.host);\n    },\n\n    changeResearcherAvailability: function() {\n      if (!this.availabledate) {\n        this.availabledate = this.findResearcherInList(this.userId).available_date;\n        this.store('availabledate', this.availabledate);\n      }\n      $('#availableDate').val(this.availabledate);\n\n      $(\"#availableDate\").datepicker({\n        format: \"yyyy-mm-dd\",\n        autoclose: true,\n        todayHighlight: true,\n        startDate: this.currentDate,\n        setDate: new Date(this.availabledate)\n      }).on(\"changeDate\", function() {\n          this.changeDate($('#availableDate').val());\n      });\n\n      $('#modalResearcherAvailability').modal('show');\n    },\n\n    viewProfile: function() {\n      $('#modalStudentProfile').modal('show');\n    },\n\n    viewConversations: function() {\n      $('#modalConversations').modal('show');\n    },\n\n    uploadCv: function(username, event) {\n      var student_username = username;\n      var files = event.target.files;\n      var file = new FormData();\n      file.append('cv', files[0]);\n      var modelRoute = '/students/' + encodeURIComponent(username) + '/cvs';\n      var fileUrl = this.be_url + modelRoute;\n\n      this.$http.post(fileUrl, file, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(function(response) {\n        // success callback\n        this.getCv(student_username);\n      }, function(response) {\n        //error callback\n        console.log('error uploading your cv ' + response.status);\n        console.log(response);\n      });\n    },\n\n    hidePassword: function() {\n      $('.pass').find('input[type=\"text\"]').attr(\"type\", \"password\");\n      this.viewPasswordClicked = false;\n    },\n\n    viewPassword: function() {\n        $('.pass').find('input[type=\"password\"]').attr(\"type\", \"text\");\n        this.viewPasswordClicked = true;\n    },\n\n    getCv: function(username, event) {\n      var student_username = username;\n      var modelRoute = '/students/' + encodeURIComponent(student_username) + '/cvs/';\n      var urlRoute = this.be_url + modelRoute;\n      this.$http.get(urlRoute).then(function(response) {\n        // success callback\n        this.studentCv = response;\n        this.processCv();\n      }, function(response) {\n        //error callback\n        console.log('error getting cv ' + response.status);\n      });\n    },\n\n    processCv: function() {\n      var file = [];\n\n      this.studentCv.data.forEach(function(cv) {\n        var name = cv;\n        var filename = cv;\n        var fileObj = {filename};\n        file.push(filename);\n        this.studentHasCv = true;\n      });\n      this.cvStudent = file;\n    },\n\n    deleteCv: function(username, filename) {\n      var student_username = username;\n      var file_route = '/students/' + encodeURIComponent(student_username) + '/cvs/' + encodeURIComponent(filename);\n      var fileUrl = this.be_url + file_route;\n\n      this.$http.delete(fileUrl).then(function(response) {\n        // success callback\n        // set studentHasCv to false\n        this.studentHasCv = false;\n      }, function(response) {\n          //error callback\n          console.log('error deleting cv ' + response.status);\n      });\n    },\n\n    uploadTranscripts: function(username, event) {\n      var student_username = username;\n      var files = event.target.files;\n      var file = new FormData();\n      file.append('transcript', files[0]);\n      var modelRoute = '/students/' + encodeURIComponent(student_username) + '/transcripts';\n      var fileUrl = this.be_url + modelRoute;\n\n      this.$http.post(fileUrl, file).then(function(response) {\n        // success callback\n        this.getTranscripts(student_username);\n      }, function(response) {\n        //error callback\n        console.log('error uploading your transcripts ' + response.status);\n        console.log(response);\n      });\n    },\n\n    getTranscripts: function(username, event) {\n      var student_username = username;\n      var modelRoute = '/students/' + encodeURIComponent(student_username) + '/transcripts';\n      var urlRoute = this.be_url + modelRoute;\n\n      this.$http.get(urlRoute).then(function(response) {\n        // success callback\n        this.studentTranscripts = response;\n        this.processTranscripts();\n      }, function(response) {\n        //error callback\n        console.log('error posting availability ' + response.status);\n      });\n    },\n\n    processTranscripts: function() {\n      var files = [];\n      if (this.studentTranscripts.data != undefined) {\n        this.studentTranscripts.data.forEach(function(transcript) {\n          var name = transcript;\n          files.push(name);\n          this.studentHasTranscripts = true;\n        });\n      }\n\n      this.transcriptsStudent = {files};\n    },\n\n    deleteTranscript: function(username, filename, event) {\n      var clickedTranscript= event.target;\n      var file_route = '/students/' + encodeURIComponent(username) + '/transcripts/' + encodeURIComponent(filename);\n      var fileUrl = this.be_url + file_route;\n\n      this.$http.delete(fileUrl).then(function(response) {\n        this.getTranscripts(username);\n      }, function(response) {\n        //error callback\n        console.log('error deleting cv ' + response.status);\n      });\n    },\n\n    viewResearcherProfile: function(selectedResearcherId) {\n      var researcherPositionTitle;\n      var researcherAcademicUnit;\n      var researcherId;\n      var researcherName;\n      this.clickedResearcherId = selectedResearcherId;\n      this.clickedResearcher = null;\n      $('#newmessage').val('');\n\n      for (var selR of this.researchers) {\n        if (selR.id == selectedResearcherId) {\n          this.clickedResearcher = selR;\n          this.clickedResearcherName = selR.membership_information.first_name + ' ' + selR.membership_information.last_name;\n          break;\n        }\n      }\n\n      if (this.clickedResearcher !== null) {\n        this.$nextTick(function () {\n          // Use nextTick to give Vue a chance to add the modal into the DOM before Bootstrap tries to show it\n          $('#modalResearcherProfile').modal('show');\n\n          if (this.role == 'student') {\n            //user logged in\n            //check if user has a profile\n            if (this.profile === true) {\n              //check if user has started a conversation with researcher\n              this.checkStudentTalkedToResearcher();\n            } else {\n              $('#modalStudentProfile').modal('show');\n            }\n          }\n        });\n      }\n\n      // Set variables for Previous and Next buttons\n      // There's probably a slicker way to find where we are in researcherFilteredList, but this does the trick.\n      var index = 0;\n      for (var researcher of this.researchersFiltered) {\n        if (researcher.id == selectedResearcherId) {\n          break;\n        } else {\n          index += 1;\n        }\n      }\n\n      if (index > 0) {\n        // Current researcher is not first in the list\n        this.prevButtonDisabled = false;\n        var prevResearcherIndex = index - 1;\n        this.prevResearcherId = this.researchersFiltered[prevResearcherIndex][\"id\"]\n      } else {\n        // Current researcher is first in the list\n        this.prevButtonDisabled = true;\n        this.prevResearcherId = \"\";\n      }\n\n      if (index < this.researchersFiltered.length - 1) {\n        // Current researcher is not last in the list\n        this.nextButtonDisabled = false;\n        var nextResearcherIndex = index + 1;\n        this.nextResearcherId = this.researchersFiltered[nextResearcherIndex][\"id\"]\n      } else {\n        // Current researcher is last in the list\n        this.nextButtonDisabled = true;\n        this.nextResearcherId = \"\";\n      }\n    },\n\n    checkStudentTalkedToResearcher: function() {\n      for (var student of this.studentConversations) {\n        for (var researcher of student.talkedWith) {\n          var clickedResearcherId = parseInt(this.clickedResearcherId);\n\n          if (researcher.researcherid === clickedResearcherId) {\n            this.theResearcherTalkedToStudent = true;\n            break;\n          } else {\n            this.theResearcherTalkedToStudent = false;\n          }\n        }\n      }\n    },\n\n    login: function() {\n      this.clickedResearcher = null;\n      this.clickedResearcherName = '';\n      $('#email').val('');\n      $('#thePassword').val('');\n      $('#username').val('');\n      $('#password').val('');\n      $('#modalLogin').modal('show');\n    },\n\n    contactResearcher: function() {\n      $('#modalLogin').modal('show');\n    },\n\n    processResearcherAvailability: function(researcherId, available_date) {\n      for (var researcher of this.researchers) {\n        if (researcher.id == researcherId) {\n          this.$set(researcher, 'available_date', available_date);\n          break;\n        }\n      }\n    },\n\n    changeDate: function(selectedDate) {\n      if (selectedDate >= this.currentDate) {\n        $('#modalResearcherAvailability').find('.btn-primary').attr('disabled', false);\n        $(\".alertPastDate\").removeClass('alertPastDate alert alert-danger alert-dismissible fade in').addClass('alertPastDate alert alert-danger alert-dismissible');\n        this.dateInThePast = false;\n        $('#availableDate').val(selectedDate);\n      } else {\n        $('#modalResearcherAvailability').find('.btn-primary').attr('disabled', true);\n        $(\".alertPastDate\").removeClass('alertPastDate alert alert-danger alert-dismissible').addClass('alertPastDate alert alert-danger alert-dismissible fade in');\n        this.dateInThePast = true;\n      }\n    },\n\n    saveAvailability: function(id, event) {\n      var available_date = $('#availableDate').val();\n      var availabilityContent = {\n        available_date\n      };\n      var urlRoute = this.be_url + '/researchers/' + id;\n\n      this.$http.put(urlRoute, availabilityContent).then(function(response) {\n        // success callback\n        this.availabledate = available_date;\n        this.store('availabledate', this.availabledate);\n\n        this.$forceUpdate();\n        this.getResearchers();\n      }, function(response) {\n        //error callback\n        console.log('failed to update availability');\n        console.log(response.data);\n        console.log(response.status);\n      });\n    },\n\n    messageRead: function(id) {\n      // Mark message as read, by adding a value for read_date.\n      var today = new Date();\n      var read_date = today.toISOString();\n      var content = {read_date};\n      var modelRoute = '/conversations/' + id;\n      var fileUrl = this.be_url + modelRoute;\n\n      this.$http.put(fileUrl, content).then(function(response) {\n        // success callback\n        this.getMessageList();\n\n      }, function(response) {\n        //error callback\n        console.log('error saving message ' + response.status);\n        console.log('response');\n        console.log(response);\n      });\n    },\n\n    sendInitialMessage: function(\n      researcher_uniweb_number,\n      student_username,\n      student_name,\n      level_of_instruction,\n      admitted,\n      program_code\n    ) {\n      if (!this.emailInProgress) {\n        this.emailInProgress = true;\n        var body = $('#newmessage').val();\n        var messageContent;\n\n        var is_from_student = false;\n        if (this.role === 'student') {\n          is_from_student = true;\n\n          var researcher_name = this.clickedResearcherName;\n          if (this.clickedResearcherName === '') {\n            researcher_name = $('#researcherName').val().trim();\n          }\n        }\n\n        var level_of_instruction_en = locales.en.message[level_of_instruction.toUpperCase()];\n        var level_of_instruction_fr = locales.fr.message[level_of_instruction.toUpperCase()];\n        var admitted_en = this.findInJson(this.isAdmitted,admitted,\"en\");\n        var admitted_fr = this.findInJson(this.isAdmitted,admitted,\"fr\");\n        var program_code_en = this.findInJson(this.programs,program_code,\"en\");\n        var program_code_fr = this.findInJson(this.programs,program_code,\"fr\");\n        var is_draft = false;\n\n        researcher_uniweb_number = parseInt(researcher_uniweb_number);\n        messageContent = {\n          researcher_uniweb_number,\n          researcher_name,\n          student_username,\n          student_name,\n          body,\n          is_from_student,\n          level_of_instruction_en,\n          level_of_instruction_fr,\n          admitted_en,\n          admitted_fr,\n          program_code_en,\n          program_code_fr,\n          is_draft\n        }; //isFromStudent boolean\n        var modelRoute = '/conversations/';\n        var fileUrl = this.be_url + modelRoute;\n\n        this.$http.post(fileUrl, messageContent).then(function(response) {\n          // success callback\n          this.emailInProgress = false;\n          if (this.role === 'student') {\n            this.hasConversations = true;\n            this.store('hasConversations',this.hasConversations);\n            this.theResearcherTalkedToStudent = true;\n            this.messageSent = true;\n            //$(\".alert1\").removeClass('alertMessageSent alert alert-success alert-dismissible').addClass('alertMessageSent alert alert-success alert-dismissible fade in');\n\n            window.setTimeout(function() {\n            $(\".alert2\").fadeTo(500, 0).slideUp(500, function() {\n              //$(this).remove();\n              $(this).hide();\n              vm.messageSent = false;\n            });\n            }, 3000);\n\n            this.getMessageList();\n            return this.theResearcherTalkedToStudent, this.messageSent, this.hasConversations;\n\n          } else if (this.role === 'researcher') {\n\n            this.hasConversations = true;\n            this.store('hasConversations',this.hasConversations);\n            this.theResearcherTalkedToStudent = true;\n            $('#modalResearcherProfile').modal('hide');\n            $('#modalConversations').modal('hide');\n            this.getMessageList();\n            return this.theResearcherTalkedToStudent, this.hasConversations;\n\n          } else {\n            return;\n          }\n        }, function(response) {\n          //error callback\n          this.emailInProgress = false;\n          console.log('error saving message ' + response.status);\n          console.log('response');\n          console.log(response);\n          this.theResearcherTalkedToStudent = false;\n          this.hasConversations = false;\n          this.store('hasConversations',this.hasConversations);\n          return this.theResearcherTalkedToStudent, this.hasConversations;\n        });\n      }\n    },\n\n    sendMessageFromStudent: function(researcher_uniweb_number, researcher_name, student_username, student_name, is_from_student) {\n      if (!this.emailInProgress) {\n        this.emailInProgress = true;\n        var messageId = this.conversationsEmail.id;\n        var messageBoxId = '#newmessage-'+messageId;\n        var body = $(messageBoxId).val();\n        var is_draft = false;\n\n        if (is_from_student == true) {\n          is_from_student = false;\n        } else {\n          is_from_student = true;\n        }\n\n        var messageContent = {researcher_uniweb_number, researcher_name, student_username, student_name, body, is_from_student, is_draft}; //isFromStudent boolean\n        var modelRoute = '/conversations/';\n        var fileUrl = this.be_url + modelRoute;\n\n        this.$http.post(fileUrl, messageContent).then(function(response) {\n          // success callback\n          this.emailInProgress = false;\n          this.messageSent = true;\n\n          window.setTimeout(function() {\n            $(\".alert2\").fadeTo(500, 0).slideUp(500, function() {\n              $(this).hide();\n              vm.messageSent = false;\n              $('#modalConversationsNotSigned textarea').val(\"\");\n            });\n          }, 3000);\n        }, function(response) {\n          //error callback\n          this.emailInProgress = false;\n          console.log('error saving message sendMessageFromStudent ' + response.status);\n          console.log('response');\n          console.log(response);\n        });\n      }\n    },\n\n    sendMessage: function(index, researcher_name, researcher_uniweb_number, student_username, student_name) {\n      if (!this.emailInProgress) {\n        this.emailInProgress = true;\n        var textareaId = '#newmessage-' + index;\n        var body = $(textareaId).val();\n        var is_from_student = false;\n        var is_draft = false;\n\n        if (this.role === 'student') {\n          is_from_student = true;\n        }\n\n        researcher_uniweb_number = parseInt(researcher_uniweb_number);\n        var messageContent = {researcher_uniweb_number, researcher_name, student_username, student_name, body, is_from_student, is_draft}; //isFromStudent boolean\n        var modelRoute = '/conversations/';\n        var fileUrl = this.be_url + modelRoute;\n\n        this.$http.post(fileUrl, messageContent).then(function(response) {\n          // success callback\n          this.emailInProgress = false;\n          if (this.role === 'student' || this.role === 'researcher') {\n            this.hasConversations = true;\n            this.store('hasConversations',this.hasConversations);\n            this.theResearcherTalkedToStudent = true;\n            this.messageSent = true;\n            //$(\".alert2\").removeClass('alertMessageSent alert alert-success alert-dismissible').addClass('alertMessageSent alert alert-success alert-dismissible fade in');\n\n            window.setTimeout(function() {\n              $(\".alert2\").fadeTo(500, 0).slideUp(500, function() {\n                $(this).hide();\n                vm.messageSent = false;\n              });\n            }, 3000);\n\n            $('#modalConversations textarea').val('');\n            this.getMessageList();\n            return this.theResearcherTalkedToStudent, this.hasConversations;\n          }\n        }, function(response) {\n          //error callback\n          this.emailInProgress = false;\n          console.log('error saving message sendMessage ' + response.status);\n          console.log('response');\n          console.log(response);\n          this.theResearcherTalkedToStudent = false;\n          this.hasConversations = false;\n          this.store('hasConversations',this.hasConversations);\n          return this.theResearcherTalkedToStudent, this.hasConversations;\n        });\n      }\n    },\n\n    confirmIncompleteProfile: function(username) {\n      if (this.profile === true) {\n        this.updateProfile(username, true);\n      } else {\n        this.createProfile(username, false, true);\n      }\n    },\n\n    updateProfile: function(username, isConfirmed) {\n      var program_code = 0;\n      var profileContent = {};\n      this.updateProfileFailed=false;\n      var name = this.name;\n      var email = this.email;\n      var level_of_instruction = this.levelOfInstruction;\n      var admitted = this.getAdmittedValue();\n      this.admitted = admitted;\n      var program_code = this.getProfileCodeValue();\n\n      if ((name!=\"\"&& email != \"\" && level_of_instruction!=\"\" && admitted != \"\" && program_code!=0 && this.studentTranscripts.data.length != 0 && this.studentCv.data.length != 0) || isConfirmed==true) {\n        profileContent = {name, email, level_of_instruction, program_code, admitted}; //cv transcript path\n\n        var modelRoute = '/students/' + encodeURIComponent(username);\n        var url = this.be_url + modelRoute;\n\n        this.$http.put(url, profileContent).then(function(response) {\n          // success callback\n          this.getStudent(this.username);\n          this.updateProfileFailed=false;\n          $('.name-block').removeClass('glow');\n          $('.level-block').removeClass('glow');\n          $('.admittedTo-block').removeClass('glow');\n          $('.program-block').removeClass('glow');\n          $('.transcript-block').removeClass('glow');\n          $('.cv-block').removeClass('glow');\n          $('#modalStudentProfile').modal('hide');\n        }, function(response) {\n          console.log(response);\n          console.log('error saving profile ' + response.status);\n        });\n      } else {\n        if (name==\"\") {\n          $('.name-block').addClass('glow');\n        }\n        if (level_of_instruction==\"\") {\n          $('.level-block').addClass('glow');\n        }\n        if (admitted==\"\") {\n          $('.admittedTo-block').addClass('glow');\n        }\n        if (program_code == 0) {\n          $('.program-block').addClass('glow');\n        }\n        if (this.studentTranscripts.data.length == 0) {\n          $('.transcript-block').addClass('glow');\n        }\n        if (this.studentCv.data.length == 0) {\n          $('.cv-block').addClass('glow');\n        }\n        $('.alert').show();\n        this.updateProfileFailed=true;\n      }\n    },\n\n    getAdmittedValue: function() {\n      var is_admitted = $('#admitted').find('input[name=is_admitted]:checked').val();\n\n      for (var item of this.isAdmitted) {\n        if (item.code == is_admitted) {\n          var admitted = is_admitted;\n          break;\n        }\n      }\n\n      if (admitted == undefined) {\n        admitted = \"\";\n      }\n      return admitted;\n    },\n\n    getProfileCodeValue: function() {\n      var program_code = $('#StudentProfile .showSelectMenu select option:selected').val();\n\n      var parsed_program_code=parseInt(program_code);\n      if (isNaN(parsed_program_code)) {\n        parsed_program_code=0;\n      }\n      return parsed_program_code;\n    },\n\n    createProfile: function(username, isFromEmail, isConfirmed) {\n      this.updateProfileFailed=false;\n      var profileContent = {};\n\n      var name = $('#StudentProfile').find('#name').val().trim();\n      this.password = $('#modalStudentProfile #passwordExt').val().trim();\n\n      if (isFromEmail) {\n        var email = username;\n      } else {\n        var email = this.email;\n        this.name = name;\n        this.store('name', this.name);\n        this.username = username;\n        this.store('username',this.username);\n\n        if (this.internal) {\n          this.password = $('#modalLogin #password').val().trim();\n        }\n      }\n      var application = 'TSS';\n      var level_of_instruction = this.levelOfInstruction;\n\n      var admitted = this.getAdmittedValue();\n      this.admitted = admitted;\n\n      var program_code = this.getProfileCodeValue();\n\n      if (name != \"\" && this.password != '') {\n        // Name and password are okay. Check the other fields.\n        if ((level_of_instruction != \"\" && program_code != 0 && admitted != \"\" && this.studentCv.data !=undefined && this.studentTranscripts.data !=undefined) || isConfirmed) {\n          // Other fields are okay too. Save their profile.\n          profileContent = {name, email, username, level_of_instruction, program_code, admitted};\n\n          var modelRoute = '/students';\n          var fileUrl = this.be_url + modelRoute;\n\n          this.$http.post(fileUrl, profileContent).then(function(response, err) {\n            // success callback\n\n            if (this.internal) {\n              this.loggedIn = true;\n              this.store('loggedIn',this.loggedIn);\n\n              this.readUserRole(this.username);\n\n              if (!isFromEmail) { // not from email\n                this.createAccountFailed = false;\n              }\n\n              this.updateProfileFailed=false;\n              $('.name-block').removeClass('glow');\n              $('.level-block').removeClass('glow');\n              $('.admittedTo-block').removeClass('glow');\n              $('.program-block').removeClass('glow');\n              $('.transcript-block').removeClass('glow');\n              $('.cv-block').removeClass('glow');\n\n              $('#modalStudentProfile').modal('hide');\n\n            } else { // External student; need to save their credentials in FOMSSO.\n                var url = this.fomsso_url + \"/register\";\n                var credentials = {'username': this.username, 'password': this.password, 'application': application, 'name': this.name };\n                this.$http.post(url, credentials).then(function(response) {\n                  // success\n                  this.token = response.headers('token');\n                  var user = this.parseJwt(this.token);\n                  var email = user.email;\n                  this.loggedIn = true;\n                  this.store('loggedIn',this.loggedIn);\n                  if (isFromEmail) {\n                    this.profile = true;\n                    this.store('profile',this.profile);\n                  }\n                  this.createAccountFailed = false;\n\n                  $('.name-block').removeClass('glow');\n                  $('.level-block').removeClass('glow');\n                  $('.admittedTo-block').removeClass('glow');\n                  $('.program-block').removeClass('glow');\n                  $('.transcript-block').removeClass('glow');\n                  $('.cv-block').removeClass('glow');\n\n                  $('#modalStudentProfile').modal('hide');\n                  this.readUserRole(this.username);\n                }, function(response) {\n                  //error callback\n                  console.log(response);\n                  console.log(response.status);\n                  this.updateStateEngine('EmailFound',true);\n              });\n            } // End of saving credentials for external students\n          }, function(response) {\n            //error callback\n            console.log(response);\n            console.log('error saving profile ' + response.status);\n          }); // End of saving profile\n        } else { // Name and password are okay but there's a problem with one of the other fields\n          this.noNameAndPassword = false;\n\n          if (level_of_instruction == \"\") {\n            $('.level-block').addClass('glow');\n          }\n          if (admitted == \"\") {\n            $('.admittedTo-block').addClass('glow');\n          }\n          if (program_code == 0) {\n            $('.program-block').addClass('glow');\n          }\n          if (this.studentTranscripts.data == undefined) {\n            $('.transcript-block').addClass('glow');\n          }\n          if (this.studentCv.data == undefined) {\n            $('.cv-block').addClass('glow');\n          }\n          $('.alert').show();\n          this.updateProfileFailed=true;\n        }\n      } else { // Name or password is blank\n        this.noNameAndPassword = true;\n\n        if (name == \"\") {\n          $('.name-block').addClass('glow');\n        }\n        if (this.password == \"\") {\n          $('.name-block').addClass('glow');\n        }\n        $('.alert').show();\n        this.updateProfileFailed=true;\n      }\n    },\n\n    addInterestToInterestChoices: function(theValue, theIndex) {\n      var interestChoicesObj = {theIndex, theValue};\n      this.interestsChoices.push(interestChoicesObj);\n      $('#interests-' + theIndex).prop('checked', true);\n    },\n\n    removeInterestFromInterestChoices: function(theValue, theIndex) {\n      var i = 0;\n      for (var choice of this.interestsChoices) {\n        if (theIndex == choice.theIndex) {\n          this.interestsChoices.splice(i, 1);\n          break;\n        }\n        i += 1;\n      }\n      $('#interests-' + theIndex).prop('checked', false);\n    },\n\n    clearInterestsChoices: function() {\n      this.interestsChoices = [];\n      $('[id^=interests-]').prop('checked', false);\n      // Deliberately not calling onRefreshSearch yet\n    },\n\n    uncheckAll: function() {\n      this.interestsChoices = [];\n      $('[id^=interests-]').prop('checked', false);\n\n      this.researchersFiltered = this.onRefreshSearch();\n      this.extractAlphaFilter();\n    },\n\n    updateChecked: function(value, index, event) { // called when an interest is selected in treeview/list\n      if (event.target.checked) {\n        this.addInterestToInterestChoices(value, index);\n      } else {\n        //remove interest from interestchoices\n        this.removeInterestFromInterestChoices(value, index)\n      }\n\n      this.researchersFiltered = this.onRefreshSearch();\n      this.extractAlphaFilter();\n    },\n\n    createMasterInterestList: function() {\n      for (var researcher of this.researchers) {\n        if (researcher.research_interests != null) {\n          for (var anInterest of researcher.research_interests) {\n            if (anInterest != null) {\n              var leaf = anInterest.interest[1];\n              var index = 0;\n              for (var selectedInterest of this.selectedInterests) {\n                if (leaf == selectedInterest) {\n                  if (this.researchersMasterInterestsList[index]) {\n                    //if term exist in array of set\n                    this.researchersMasterInterestsList[index].add(researcher);\n                  } else {\n                    this.researchersMasterInterestsList[index] = new Set([researcher]);\n                  }\n                }\n                index+=1;\n              }\n            } //end if anInterest != null\n          }//end researcher.research_interests loop\n        }//end if researcher.research_interests != null\n      }\n    },\n\n    createInterestList: function() {\n      this.selectedInterests = [];\n      for (var researcher of this.researchers) {\n        if (researcher.research_interests != null) {\n          for (var anInterest of researcher.research_interests) {\n            if (anInterest != null) {\n              var leaf = anInterest.interest[1];\n              if ($.inArray(leaf, this.selectedInterests)=='-1') {\n                  this.selectedInterests.push(leaf);\n              }\n            } //end if anInterest != null\n          }//end researcher.research_interests loop\n        }//end if researcher.research_interests != null\n      }//end this.researchers loop\n      this.selectedInterests.sort(function(s1, s2) {\n          var l=s1.toLowerCase(), m=s2.toLowerCase();\n          return l===m?0:l>m?1:-1;\n      });\n    },\n\n    toggleLanguage: function() {\n      if (this.theSelectedLanguage == 'en') {\n        var newLang = 'fr';\n      } else {\n        var newLang = 'en';\n      }\n      $('html').attr('lang', newLang);\n      Vue.config.lang = newLang;\n      document.title = 'uOttawa ' + this.$t('message.FACULTY-OF-MEDICINE') + ' ' + this.$t('message.TSS'); // Keep this synchronized with the actual <title> element please\n      this.theSelectedLanguage = newLang;\n      this.store('theSelectedLanguage',this.theSelectedLanguage);\n    },\n\n    getStudentProfile: function(username) {\n      var student_username = username;\n      var modelRoute = '/students/' + encodeURIComponent(username);\n      var url = this.be_url + modelRoute;\n\n      this.$http.get(url).then(function(response) {\n        // success callback\n        this.student_profile = response.data;\n        this.process_student_profile(student_username);\n      }, function(response) {\n        // error callback\n        console.log('error');\n        console.log(response);\n        console.log(response.status);\n      });\n    },\n\n    process_student_profile: function(username) {\n      var student_username = username;\n      if (this.student_profile) {\n        this.student_profile_array = [];\n        this.student_profile_array.push(this.student_profile);\n        this.getCv(student_username);\n        this.getTranscripts(student_username);\n        $(\"#modalViewStudentProfile\").modal('show');\n      }\n    },\n\n    getStudent: function(username) {\n      var modelRoute = '/students/' + encodeURIComponent(username);\n      var tssurl = this.be_url + modelRoute;\n\n      this.$http.get(tssurl).then(function(response, err) {\n        // success callback\n        this.student = response.data;\n\n        if (this.student) {\n          this.profile = true;\n          this.store('profile',this.profile);\n\n          this.getCv(username);\n          this.getTranscripts(username);\n\n          this.name = this.student.name;\n          this.store('name',this.name);\n\n          this.levelOfInstruction = this.student.level_of_instruction;\n          this.store('levelOfInstruction',this.levelOfInstruction);\n\n          this.programAdmitted = this.student.program_code;\n          this.store('programAdmitted',this.programAdmitted);\n\n          this.admitted = this.student.admitted;\n          this.store('admitted',this.admitted);\n\n          this.isAdmittedToProgram = (this.programAdmitted != 0);\n          this.store('isAdmittedToProgram',this.isAdmittedToProgram);\n\n          this.checkProgramRadio();\n          this.getMessageList();\n          $('#modalLogin').modal('hide');\n        } else {\n          this.profile = false;\n          this.store('profile',this.profile);\n          $('#modalLogin').modal('hide');\n          $('#modalStudentProfile').modal('show');\n        }\n      }, function(err) {\n        // error callback\n        console.log('error');\n        console.log(err);\n        console.log(err.status);\n      });\n    },\n\n    getResearchers: function() {\n      var url = this.uniweb_url + \"/professors\";\n\n      this.$http.get(url).then(function(response, error) {\n        this.researchers = response.data;\n        this.processUniwebFeed();\n        this.createInterestList();\n        this.createMasterInterestList();\n        this.extractAlphaFilter();\n        $('#loading-message').remove();\n\n        // if (this.role != '') {\n        //   this.getMessageList(); // Not sure why we need this. Let's try commenting it out and see what happens.\n        // }\n        // if (this.role == 'student') {\n        //   this.getStudent(this.username); // Not sure why we need this\n        // }\n      }, function(response) {\n        // error callback\n        console.log(response);\n        console.log(response.status);\n      });\n    },\n\n    onCancel: function() {\n      $(\"#dontHaveAccount\").find(\"input#email\").val(\"\");\n      this.updateStateEngine('notStarted', true);\n    },\n\n    onCreateAccount: function() {\n      this.username = $(\"#email\").val().toLowerCase().trim();\n      var email = this.username;\n      var application = \"TSS\";\n      var username = this.username;\n      if (this.username != '') {\n        var modelRoute = '/verifications/account/' + encodeURIComponent(this.username);\n        var theurl = this.be_url;\n        var url = theurl + modelRoute;\n\n        this.studentTranscripts = [];\n        this.studentCv = [];\n\n        this.$http.post(url,\n          {\n            headers: {\n            'Content-Type': ''\n          }\n        })\n        this.createAccountFailed = false;\n        this.updateStateEngine('EmailSent', true);\n\n      } else {\n        //display alert credantial missing\n        this.createAccountFailed = true;\n        $('#externalcreateAccountFailedAlert').show();\n        this.updateStateEngine('EmailNotFound', true);\n      }\n    },\n\n    onVerifyEmail: function() {\n      var email = $('#email').val().toLowerCase().trim();\n      this.email = email;\n      this.username = email;\n      this.internal = false;\n      this.readUserRole(this.username);\n      this.fromEmailLink = false;\n    },\n\n    onEmailPassword: function() {\n      if (this.username == '') {\n        this.username = $(\"#email\").val().toLowerCase().trim();\n      }\n\n      this.password = $(\"#thePassword\").val().trim();\n      var application = \"TSS\";\n\n      if (this.password !== '' && this.username !== '') {\n        var email = this.username;\n        var url = this.fomsso_url + \"/auth\";\n        var credentials = {'username': this.username, 'password': this.password, 'application': application};\n\n        this.$http.post(url, credentials).then(function(response) {\n          // success callback\n          this.token = response.headers('token');\n          var user = this.parseJwt(this.token);\n          var email = user.email;\n          this.loggedIn = true;\n          this.loginFailed = false;\n          this.store('email', this.email);\n          this.store('username', this.username);\n          this.store('loggedIn', this.loggedIn);\n          $('#modalLogin').modal('hide');\n          this.readUserRole(email);\n        }, function(response) {\n          this.loginFailed = true;\n          this.updateStateEngine('EmailFound',true);\n        });\n      } else {\n        // username or password is null\n        this.loginFailed = true;\n        $('#modalLogin').modal('show');\n        $('#dontHaveAccount').attr(\"aria-expanded\", true);\n        $('#dontHaveAccount').addClass('in');\n      }\n    },\n\n    updateStateEngine: function(newState, storeState) {\n      this.loginState = newState;\n      if (storeState) {\n        this.store('loginState',this.loginState);\n      }\n    },\n\n    // onTryAgain: function() {\n    //   this.updateStateEngine('EmailSent',true);\n    // },\n\n    onResendEmail: function() {\n      this.updateStateEngine('ResetSent', true);\n      var modelRoute = '/verifications/account/' + encodeURIComponent(this.username);\n      var theurl = this.be_url;\n      var url = theurl + modelRoute;\n      this.$http.post(url, {\n        headers: {\n          'Content-Type': ''\n        }\n      })\n    },\n\n    checkUrl: function() {\n      var email = this.getUrlParameter('email');\n      var code = this.getUrlParameter('code');\n      var action = this.getUrlParameter('action');\n      var token = this.getUrlParameter('conversationid');\n\n      if (email != '' && code != '') {\n        if (action == 'create-account') {\n          this.onVerificationCodeEmail(code, email);\n        } else {\n          this.onUpdatePasswordEmail(code, email);\n        }\n      } else { // email or code is null\n        if (token != '') {\n          this.getMessageEmail(token);\n        }\n      }\n    },\n\n    getUrlParameter: function(name) {\n      name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n      var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n      var results = regex.exec(location.search);\n      return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n    },\n\n    getMessageEmail: function(token) {\n      var modelRoute = '/conversations/token/' + token;\n      var theurl = this.be_url;\n      var url = theurl + modelRoute;\n\n      this.$http.get(url).then(function(response) {\n        this.conversationsEmail = [];\n        this.conversationsEmail.id = response.data.id;\n        this.conversationsEmail.researcher_uniweb_number = response.data.researcher_uniweb_number;\n        this.conversationsEmail.researcher_name = response.data.researcher_name;\n        this.conversationsEmail.student_username = response.data.student_username;\n        this.conversationsEmail.student_name = response.data.student_name;\n        this.conversationsEmail.body = response.data.body;\n        this.conversationsEmail.sent_date = response.data.send_date;\n        this.conversationsEmail.read_date = response.data.read_date;\n        this.conversationsEmail.is_from_student = response.data.is_from_student;\n\n        $('#modalConversationsNotSigned').modal('show');\n      });\n    },\n\n    onUpdatePasswordEmail: function(code, username) {\n      var verificationCode = code;\n      this.code = code;\n\n      var modelRoute = '/verifications/email/' + encodeURIComponent(username) + '/code/' + encodeURIComponent(code); // code is numeric but we're going to uriencode it anyway\n      this.username = username;\n\n      var theurl = this.be_url;\n      var url = theurl + modelRoute;\n      this.$http.get(url).then(function(response) {\n        this.updateStateEngine('NewPasswordCreation', true);\n        $('#modalLogin').modal('show');\n        $('#dontHaveAccount').attr(\"aria-expanded\", true);\n        $('#dontHaveAccount').addClass('in');\n      });\n    },\n\n    onVerificationCodeEmail: function(code, username) {\n      var verificationCode = code;\n      var modelRoute = '/verifications/email/' + encodeURIComponent(username) + '/code/' + encodeURIComponent(code);\n\n      var theurl = this.be_url;\n      var url = theurl + modelRoute;\n\n      this.$http.get(url).then(function(response, error) {\n        this.username = username;\n        this.store('username', this.username);\n        this.email = username;\n        this.code = verificationCode;\n        this.store('verificationCode', this.code);\n        this.store('email', this.email);\n        this.fromEmailLink = true;\n        this.internal = false;\n\n        this.readUserRole(this.username);\n      }, function(error) {\n        this.loginFailed = true;\n        this.loggedIn = false;\n        this.store('loggedIn', this.loggedIn);\n        $('#modalLogin').modal('show');\n        this.updateStateEngine('InvalidKey', true);\n        $('#dontHaveAccount').attr(\"aria-expanded\", true);\n        $('#dontHaveAccount').addClass('in');\n      });\n    },\n\n    onVerificationCode: function() {\n      var verificationCode = $('#verificationCode').val().trim();\n      this.code = verificationCode;\n      var modelRoute = '/verifications/email/' + encodeURIComponent(this.username) + '/code/'+ encodeURIComponent(verificationCode);\n      var theurl = this.be_url;\n      var url = theurl + modelRoute;\n\n      this.$http.get(url).then(function(response) {\n        this.internal = false;\n        this.fromEmailLink = false;\n\n        switch(this.loginState) {\n          case \"PasswordSent\":\n            this.updateStateEngine('NewPasswordCreation',true);\n            $('#modalLogin').modal('show');\n            $('#dontHaveAccount').attr(\"aria-expanded\", true);\n            $('#dontHaveAccount').addClass('in');\n            break;\n\n          case \"InvalidKey\":\n            if (this.passwordSent == true) {\n              this.updateStateEngine('NewPasswordCreation',true);\n              $('#modalLogin').modal('show');\n              $('#dontHaveAccount').attr(\"aria-expanded\", true);\n              $('#dontHaveAccount').addClass('in');\n            } else {\n              this.updateStateEngine('EmailFound',true);\n              $('#modalLogin').modal('hide');\n              $('#modalStudentProfile').modal('show');\n            }\n            break;\n\n          default:\n            //for initial account creation\n            this.updateStateEngine('EmailFound',true);\n            $('#modalLogin').modal('hide');\n            $('#modalStudentProfile').modal('show');\n        }\n      }, function(response) {\n        $('#modalLogin').modal('show');\n        this.updateStateEngine('InvalidKey', true);\n        $('#dontHaveAccount').attr(\"aria-expanded\", true);\n        $('#dontHaveAccount').addClass('in');\n      });\n    },\n\n    onResetPassword: function() {\n      this.updateStateEngine('PasswordSent', true);\n      this.passwordSent = true;\n      var modelRoute = '/verifications/password/' + encodeURIComponent(this.username);\n      var url = this.be_url;\n      var fileUrl = url + modelRoute;\n      this.$http.post(fileUrl, {\n        headers: { 'Content-Type': 'application/json; charset=UTF-8'}\n      });\n    },\n\n    onChangePassword: function() {\n      this.password = $(\"#thePassword\").val().trim();\n      var url = this.fomsso_url + \"/reset\";\n      this.store('username', this.username);\n      var credentials = { 'username': this.username, 'password': this.password};\n      this.$http.post(url, credentials, {headers: {'Content-Type' : 'text/plain'} }).then(function(response) {\n        this.processLinkLogin(this.username, this.password);\n      });\n    },\n\n    processLinkLogin: function(username, password) {\n      var application = \"TSS\";\n      var url = this.fomsso_url + \"/auth\";\n      var credentials = {'username': username, 'password': password, 'application': application};\n\n      this.$http.post(url, credentials).then(function(response) {\n        // success callback\n        this.token = response.headers('token');\n\n        this.username = username;\n        this.store('username', username);\n        $('#modalLogin').modal('hide');\n        this.loggedIn = true;\n        this.store('loggedIn', this.loggedIn);\n        this.loginFailed = false;\n        this.readUserRole(this.username);\n      }, function(response) {\n        console.log('login failed');\n        console.log(response);\n        this.loginFailed = true;\n        console.log('this.loginFailed ' + this.loginFailed);\n        this.updateStateEngine('EmailNotFound', true);\n      });\n    },\n\n    getMessageList: function() {\n      var modelRoute = '/conversations';\n      var fileUrl = this.be_url + modelRoute\n\n      this.$http.get(fileUrl).then(function(response) {\n        // success callback\n        var messageList = response.data;\n\n        switch(this.role) {\n          case \"student\":\n            this.getStudentConversations(messageList);\n            break;\n\n          case \"researcher\":\n            this.getResearcherConversations(messageList);\n        }\n      });\n    },\n\n    getResearcherConversations: function(messageList) {\n      var messageForThisResearcher;\n      var studentTalkedToResearcher = false;\n      this.conversationResearchers = [];\n\n      for (var researcher of this.researchers) {\n        if (researcher.id === this.userId) {\n          var researcherID = parseInt(researcher.id);\n          messageForThisResearcher = messageList.filter(function(item) {\n            item.researcher_uniweb_number === researcherID\n          });\n\n          if (messageForThisResearcher.length > 0) {\n            this.hasConversations = true;\n            this.store('hasConversations',this.hasConversations);\n            var conversations = this.groupBy(messageForThisResearcher, function(item) {\n              return[item.researcher_uniweb_number, item.student_username];\n            });\n            var researcherId;\n            var studentname;\n            var student_username;\n            var studentArr = [];\n            var studentObj = {};\n            var unreadCount;\n            var allUnreadCount = 0;\n            var mostRecentUpdate;\n            var studentHasReplied;\n            var firstTimeThroughLoop;\n\n            for (var conversation of conversations) {\n              firstTimeThroughLoop = true;\n              studentHasReplied = false;\n              unreadCount = 0;\n\n              for (var message of conversation) {\n\n                if (message.is_from_Student === true) {\n                  studentHasReplied = true;\n                }\n                if (message.read_date === null && message.is_from_student === true) {\n                  unreadCount += 1;\n                  allUnreadCount += 1;\n                }\n                if (firstTimeThroughLoop) {\n                  firstTimeThroughLoop = false;\n                  mostRecentUpdate = message.sent_date;\n                  student_username = message.student_username;\n                  researcherId = this.userId;\n                }\n                studentname = message.student_name;\n                student_username = message.student_username;\n                studentObj = {studentname, student_username, studentHasReplied, mostRecentUpdate, unreadCount};\n\n                studentArr.push(studentObj);\n\n              }//end of message of conversation\n              conversation['talkedWith'] = studentObj;\n              conversation['name'] = studentname;\n              conversation['username'] = student_username;\n            }// end of conversation of conversation\n\n            //sort conversations in reverse chronological order by most recent update\n            conversations.sort(function(a,b) {\n              var x = a['talkedWith']['mostRecentUpdate'];\n              var y = b['talkedWith']['mostRecentUpdate'];\n              return ((x< y)) ? 1: ((x>y) ? -1:0);\n            });\n\n            researcher['conversations'] = conversations;\n            researcher['talkedWith'] = studentArr;\n\n            this.allUnreadCount = allUnreadCount;\n            this.store('allUnreadCount', this.allUnreadCount);\n\n            researcher['newcounter'] = allUnreadCount;\n            if (allUnreadCount > 0) {\n              researcher.isUnread = true;\n            } else {\n              researcher.isUnread = false;\n            }\n          } else {\n            researcher.isUnread = false;\n          }// end of messageForThisResearcher\n          this.conversationResearchers.push(researcher);\n        }// end researcher.id === this.userId\n      } // end of var researcher of this.researchers\n    },\n\n    formatDate: function(date) {\n      var date = new Date(date);\n      var year = pad(date.getFullYear());\n      var month = pad(date.getMonth() + 1);\n      var day = pad(date.getDate());\n      var formattedDate = year +'-'+ month +'-'+ day;\n\n      function pad(numb) {\n        return (numb < 10 ? '0' : '') + numb;\n      }\n      return formattedDate;\n    },\n\n    getStudentConversations: function(messageList) {\n      var messagesForThisStudent;\n      var theResearcherTalkedToStudent = false;\n      this.studentConversations = [];\n\n      if (this.studentProfile) {\n        for (var student of this.studentProfile) {\n          messagesForThisStudent = messageList.filter(function(item) {\n            item.student_username === this.username\n          });\n\n          if (messagesForThisStudent.length > 0) {\n            this.hasConversations = true;\n            this.store('hasConversations', this.hasConversations);\n\n            var conversations = this.groupBy(messagesForThisStudent, function(item) {\n              return [item.researcher_uniweb_number];\n            });\n\n            var researcherid;\n            var conversationArr = [];\n            var conversationObj = {};\n            var researcherId;\n            var researcherName;\n            var researcherPositionTitle;\n            var researcherAcademicUnit;\n            var studentUsername;\n            var researcherHasReplied;\n            var firstTimeThroughLoop;\n            var unreadCount;\n            var allUnreadCount = 0;\n            var mostRecentUpdate;\n\n            for (var conversation of conversations) {\n              firstTimeThroughLoop = true;\n              researcherHasReplied = false;\n              unreadCount = 0;\n\n              for (var message of conversation) {\n\n                if (message.is_from_student === false) {\n                  researcherHasReplied = true;\n                }\n\n                if (message.read_date === null && message.is_from_student === false) {\n                  unreadCount += 1;\n                  allUnreadCount += 1;\n                }\n\n                if (firstTimeThroughLoop) {\n                  firstTimeThroughLoop = false;\n                  mostRecentUpdate = message.sent_date;\n                  researcherid = message.researcher_uniweb_number;\n                  studentUsername = message.student_username;\n\n                  for (var researcher of this.researchers) {\n                    if (researcher.id == researcherid) { // Use double-equals to allow string-to-integer comparison\n                      researcherName = researcher.membership_information.first_name + ' ' + researcher.membership_information.last_name;\n                      researcherPositionTitle = researcher.membership_information.position_title[1];\n                      researcherAcademicUnit = researcher.membership_information.academic_unit[1];\n                      break;\n                    } // End of if (researcher.id == researcherid)\n                  } // End of for (var researcher of this.researchers)\n                } else {\n                  if (message.sent_date > mostRecentUpdate) {\n                    mostRecentUpdate = message.sent_date;\n                  } // End of if (message.sent_date > mostRecentUpdate)\n                } // End of if (firstTimeThroughLoop)\n              } // End of for (var message of conversation)\n              conversationObj = {\n                researcherid,\n                researcherName,\n                researcherPositionTitle,\n                researcherAcademicUnit,\n                researcherHasReplied,\n                mostRecentUpdate,\n                unreadCount\n              };\n              conversationArr.push(conversationObj);\n              conversation['talkedWith'] = conversationObj;\n\n              if (researcherid == this.clickedResearcherId) {\n                theResearcherTalkedToStudent = true;\n              } // End of if (message.researcherid == this.clickedResearcherId)\n            } // End of for (var conversation of conversations)\n\n            // Sort conversations in reverse chronological order by most recent update\n            conversations.sort(function(a, b) {\n              var x = a['talkedWith']['mostRecentUpdate']; var y = b['talkedWith']['mostRecentUpdate'];\n              return ((x < y) ? 1 : ((x > y) ? -1 : 0));\n            });\n\n            student['conversations'] = conversations;\n            student['talkedWith'] = conversationArr;\n            this.studentConversations.push(student);\n\n            this.allUnreadCount = allUnreadCount;\n            this.store('allUnreadCount',this.allUnreadCount);\n            student['newCounter'] = allUnreadCount;\n\n            if (allUnreadCount > 0) {\n              student.isUnread = true;\n            } else {\n              student.isUnread = false;\n            }\n\n          } else {\n            student.isUnread = false;\n          } // End of if (messagesForThisStudent.length > 0)\n        } // End of for (var student of this.studentProfile)\n      } // End of if (this.studentProfile)\n      this.theResearcherTalkedToStudent = theResearcherTalkedToStudent;\n    },\n\n    groupBy: function(array, f) {\n      var groups = {};\n      array.forEach(function(o) {\n        var group = JSON.stringify(f(o));\n        groups[group] = groups[group] || [];\n        groups[group].push(o);\n      });\n      return Object.keys(groups).map(function(group) {\n        return groups[group];\n      })\n    },\n\n    checkProgramRadio: function() {\n      if (this.programAdmitted != 0) {\n        this.checkedYes = true;\n        this.checkedNo = false;\n        $('#StudentProfile #admittedToProgram').find('select').val(this.programAdmitted).change();\n      } else {\n        this.checkedYes = false;\n        this.checkedNo = true;\n      }\n    },\n\n    processUniwebFeed: function() { // called once by getResearchers\n      var modelRoute = '/researchers';\n      var urlRoute = this.be_url + modelRoute;\n      this.$http.get(urlRoute).then(function(response, err) {\n        // success callback\n        for (var researcher of response.data) {\n          this.processResearcherAvailability(researcher[\"uniweb_number\"], researcher[\"available_date\"]);\n        }\n\n        this.buildResearcherList(this.researchers).then(function(response) {\n          vm.researcherList = response;\n        }, function(error) {\n          console.error(\"Unable to build researcher list\", error);\n          console.log(response);\n        });\n      }, function(err) {\n        console.log('error ' + err);\n        console.log(err.status);\n      })\n\n      for (var researcher of this.researchers) {\n        this.$set(researcher, 'selected', true);\n      }\n      this.researchersFiltered = this.researchers;\n    },\n\n    onRefreshSearch: function() {\n      var matchingResearchers = new Set();\n      var hasSearch;\n      var freeTextSearchString;\n      var searchTerms;\n      var freeTextSet;\n      var researchInterestSet;\n      var researchersFiltered;\n\n      freeTextSearchString = $('#freeTextSearch').val();\n      if (freeTextSearchString != '') {\n        // User has done a free text search\n        hasSearch = true;\n        searchTerms = vm.buildSearchterms();\n        freeTextSet = intersectFreeTextTerms(searchTerms);\n\n        if (this.interestsChoices.length > 0) {\n          // User has done a free text search AND selected research interests\n          researchInterestSet = unionResearchInterests();\n          matchingResearchers = intersect(researchInterestSet, freeTextSet);\n        } else {\n          // Free text search but no research interests\n          matchingResearchers = freeTextSet;\n        }\n      } else {\n        // No free text search\n        if (this.interestsChoices.length > 0) {\n          // User has selected research interests\n          hasSearch = true;\n          researchInterestSet = unionResearchInterests();\n          matchingResearchers = researchInterestSet;\n        } else {\n          // No search terms\n          hasSearch = false;\n        }\n      }\n\n      if (hasSearch == true) {\n        researchersFiltered = [...matchingResearchers];\n        // Sort list by last name and first name before returning it\n          researchersFiltered.sort(\n            function(a,b) {\n              if (a['membership_information']['last_name'] < b['membership_information']['last_name']) {\n                return -1;\n              } else if (a['membership_information']['last_name'] > b['membership_information']['last_name']) {\n                return 1;\n              } else {\n                // Same last name, look at first name\n                if (a['membership_information']['first_name'] < b['membership_information']['first_name']) {\n                  return -1;\n                } else if (a['membership_information']['first_name'] > b['membership_information']['first_name']) {\n                  return 1;\n                } else {\n                  // Same last name and first name, look at ID\n                  return (parseInt(b['id']) - parseInt(a['id']));\n                }\n              }\n            }\n          );\n      } else {\n        researchersFiltered = this.researchers;\n      }\n      return researchersFiltered;\n\n      function unionResearchInterests() {\n        //loop through the terms\n        for (var choice of vm.interestsChoices) {\n          //find the matching set\n          var researchersMatching_ThisTerm = vm.researchersMasterInterestsList[choice.theIndex];\n          matchingResearchers = union(matchingResearchers, researchersMatching_ThisTerm);\n        }//end loop through interestsChoices\n        return matchingResearchers;\n      }//end unionResearchInterests\n\n      function intersectFreeTextTerms(terms) {\n          var matchingResearchers;\n\n          //Check if there are keywords in the freetext\n          var firstTimeThroughLoop = true; //set first flag the first time we go through the loop\n\n          //loop through the terms\n          for (var term of terms) {\n\n            //find the matching set\n            var researchersMatching_ThisTerm = vm.researcherList['tss_'+term];\n\n            if (!researchersMatching_ThisTerm) {\n              // This term doesn't match any researchers. That's enough to result in an empty set.\n              matchingResearchers = new Set();\n              break;\n\n            } else {\n              if (firstTimeThroughLoop == true) {\n                matchingResearchers = researchersMatching_ThisTerm;\n                firstTimeThroughLoop = false;\n              } else {\n                matchingResearchers = intersect(matchingResearchers, researchersMatching_ThisTerm);\n              }\n\n              if (!matchingResearchers) {\n                //if set is empty\n                break;\n              }\n            }\n          } //end loop through terms\n\n          return matchingResearchers;\n        }//end functionintersectFreeTextTerms\n\n        function union(setA, setB) {\n          var union = new Set(setA);\n          for (var elem of setB) {\n            union.add(elem);\n          }\n          return union;\n        }//end union\n\n        function intersect(setA, setB) {\n          var intersect = new Set([...setA].filter(x => setB.has(x)));\n          return intersect;\n        }//end intersect\n    },\n\n    parseJwt: function(jwtToken) {\n      var base64Url = jwtToken.split('.')[1];\n      var base64 = base64Url.replace('-', '+').replace('_', '/');\n      return JSON.parse(window.atob(base64));\n    },\n\n    logout: function() {\n        localStorage.clear();\n        sessionStorage.clear();\n        this.token = {};\n        this.loggedIn = false;\n        this.loginFailed = false;\n        this.passwordSent = false;\n        this.admitted = '';\n        this.createAccountFailed = false;\n        this.username = '';\n        this.messageSent = false;\n        this.email = '';\n        this.profile = false;\n        this.name = '';\n        this.programAdmitted = 0;\n        this.isAdmittedToProgram= false;\n        this.studentConversations = [];\n        this.studentProfile = [];\n        this.studentTranscripts = [];\n        this.studentCv = [];\n        this.studentHasCv = false;\n        this.studentHasTranscripts = false;\n        this.cvStudent = {};\n        this.transcriptsStudent = {};\n        this.hasConversations = false;\n        this.theResearcherTalkedToStudent = false;\n        this.updateStateEngine('notStarted',true);\n        // Clear search\n        this.clearInterestsChoices();\n        this.onFilterFreetextClear(); // This function also updates the search results\n\n        if (this.role == \"admin\") {\n          // We haven't called getResearchers yet for admins, so do it now\n          this.getResearchers();\n        }\n        this.role = '';\n    },\n\n    readUserRole: function(username) {\n      var modelRoute = '/roles/' + encodeURIComponent(username);\n      var url = this.be_url + modelRoute;\n\n      this.$http.get(url).then(function(response) {\n        // success callback\n        var userRole = response;\n        this.processRole(userRole);\n      }, function(response) {\n        //error callback\n        console.log('error getting role ' + response.status);\n        console.log(response);\n      });\n    },\n\n    processRole: function(userRole) {\n      this.role = userRole.data.role;\n\n      switch (this.role) {\n        case 'student':\n          this.store('role',this.role);\n\n          if (this.internal) {\n            this.loggedIn = true;\n            this.store('loggedIn',this.loggedIn);\n            this.getStudent(this.username);\n          } else {\n            // Not an internal student\n\n            if (this.fromEmailLink) {\n              //coming from email link with verification code\n              this.getStudent(this.username);\n            } else {\n              //coming from UI\n\n              if (this.loggedIn) {\n                // logged in\n                this.getStudent(this.username);\n              } else {\n                // not logged in\n                this.updateStateEngine('EmailFound',true);\n                $('#dontHaveAccount').attr(\"aria-expanded\", true);\n                $('#dontHaveAccount').addClass('in');\n              } // end of if (this.loggedIn)\n            } // end of if (this.fromEmailLink)\n          } // end of if (this.internal)\n          break;\n\n        case 'researcher':\n          this.store('role',this.role);\n\n          $('#modalLogin').modal('hide');\n          this.userId = userRole.data.id;\n          this.store('userId',this.userId);\n          this.loggedIn = true;\n          this.store('loggedIn',this.loggedIn);\n          this.getMessageList();\n          break;\n\n        case 'admin':\n          this.store('role',this.role);\n\n          //show admin screen\n          $('#modalLogin').modal('hide');\n          this.loggedIn = true;\n          this.store('loggedIn',this.loggedIn);\n          this.getStudentsInSystem();\n          this.getSupervisors();\n          this.getStudentProfileCreated();\n          break;\n\n        default:\n          //role is empty\n          this.profile = false;\n          // this.retrieve('verificationCode', this.code);\n\n          if (this.internal) {\n            $('#modalLogin').modal('hide');\n            $('#modalStudentProfile').modal('show');\n          } else {\n            // not internal\n            if (this.fromEmailLink) {\n              $('#modalLogin').modal('hide');\n              $('#modalStudentProfile').modal('show');\n            } else {\n              // not from email link\n              this.updateStateEngine('EmailNotFound', false);\n              $('#modalLogin').modal('show');\n              $('#dontHaveAccount').attr(\"aria-expanded\", true);\n              $('#dontHaveAccount').addClass('in');\n            }\n          }\n      }\n    },\n\n    getStudentProfileCreated: function() {\n      var today = new Date();\n      today = this.formatDate(today);\n      var makeDate = new Date(today);\n      var prev = new Date(makeDate.getFullYear()-1, makeDate.getMonth()+1);\n      this.startDate = this.formatDate(prev);\n      this.store('startDate', this.startDate);\n      this.endDate = today;\n      this.store('endDate', this.endDate);\n      var modelRoute = '/reports/profiles-by-month/start/' + encodeURIComponent(this.startDate) + '/end/' + encodeURIComponent(this.endDate);\n      var theurl = this.be_url + modelRoute;\n\n      this.$http.get(theurl).then(function(response) {\n        // success callback\n        this.studentProfilesByMonth = response.data;\n      }, function(response) {\n        //error callback\n        console.log('error getting all student profiles ');\n        console.log(response);\n        console.log(response.data);\n        console.log(response.status);\n      });\n\n    },\n\n    getStudentsInSystem: function() {\n      var modelRoute = '/reports/students';\n      var theurl = this.be_url + modelRoute;\n\n      this.$http.get(theurl).then(function(response, err) {\n        // success callback\n        this.studentInSystem = response.data;\n      }, function(err) {\n        //error callback\n        console.log('error getting all student in system ');\n        console.log(err);\n        console.log(err.data);\n        console.log(err.status);\n      });\n    },\n\n    getSupervisors: function() {\n      var modelRoute = '/reports/supervisors';\n      var theurl = this.be_url + modelRoute;\n\n      this.$http.get(theurl).then(function(response, err) {\n        // success callback\n        this.supervisorsInSystem = response.data;\n      }, function(err) {\n        //error callback\n        console.log('error getting all supervisors in system ');\n        console.log(err);\n        console.log(err.data);\n        console.log(err.status);\n      });\n    },\n\n    authorize: function(username, password) {\n      this.username = $(\"#username\").val().toLowerCase().trim();\n      this.password = $(\"#password\").val().trim();\n      var application = \"TSS\";\n      var url = this.fomsso_url + \"/auth\";\n      var credentials = {'username': this.username, 'password': this.password, 'application': application};\n\n      this.$http.post(url, credentials).then(function(response) {\n        // success callback\n        this.store('username', this.username);\n        this.token = response.headers('token');\n        var user = this.parseJwt(this.token);\n        this.email = user.email;\n        this.store('email',this.email);\n        this.name = user.name;\n        this.store('name',this.name);\n        this.internal = true;\n        this.store('internal',this.internal);\n        this.loginFailed = false;\n        this.readUserRole(this.username);\n      }, function(response) {\n        //error callback\n        this.loginFailed = true;\n        this.internal = true;\n        $('#internalLoginFailedAlert').show();\n        this.loggedIn = false;\n        this.store('loggedIn',this.loggedIn);\n        return this.loginFailed, this.loggedIn;\n      });\n\n      this.rememberMe = $('#rememberMe').checked;\n      this.store('rememberMe',this.rememberMe);\n    },\n\n    extractAlphaFilter: function() {\n      // for each researcher\n      // extract 1st letter of last name\n      // enable corresponding letterbutton in html\n      // Creating object listing the letters of the alphabet\n      var alphabet = 'ABCDEFGHIJKLMNOPQRTSUVWXYZ'.split('');\n      var alphabetButtons = {};\n\n      var alphaButtonArray = [];\n      for (var letter of alphabet) {\n        alphabetButtons = {letter: letter, isAvailable: false};\n        alphaButtonArray.push(alphabetButtons);\n      }\n\n      var researcherLastInitials = [];\n      for (var researcher of this.researchersFiltered) {\n        var firstchar = researcher.membership_information.last_name.charAt(0);\n        if (!_.includes(researcherLastInitials, firstchar)) {\n          researcherLastInitials.push(firstchar);\n        }\n      }\n\n      this.alphabuttons = [];\n      for (var alphabutton of alphaButtonArray) {\n        //check if it matches with the researchersLastInitials\n        if (_.includes(researcherLastInitials, alphabutton)) {\n          alphabutton.isAvailable = true;\n        } else {\n          alphabutton.isAvailable = false;\n        }\n        this.alphabuttons.push(alphabutton);\n      }\n\n      for (var alphabutton of this.alphabuttons) {\n        if (_.includes(researcherLastInitials, alphabutton.letter)) {\n          alphabutton.isAvailable = true;\n        }\n      }\n    },\n\n    buildResearcherList: function(listOfResearchers) {\n      return new Promise(function(resolve, reject) {\n        var researcherList = new Set(); //initialize set of researchers\n\n        for (var researcher of listOfResearchers) {\n          var terms = new Set(); //initialize set of terms for this researcher\n\n          //begin search in interests\n          if (researcher.research_interests) {\n\n            for (var researcherInterest of researcher.research_interests) {\n              var interest = researcherInterest.interest[1];\n\n              for (var token of tokenizeString(interest)) {\n                terms.add(token);\n              }\n            }//end of loop through interests\n          }\n\n          if (researcher.biography != null) { //search in interests\n            var bioEn = researcher.biography.academic_biography.en;\n            var bioFr = researcher.biography.academic_biography.fr;\n\n            if (bioEn) {\n              for (var token of tokenizeString(bioEn)) {\n                terms.add(token);\n              }\n            }\n\n            if (bioFr) {\n              for (var token of tokenizeString(bioFr)) {\n                terms.add(token);\n              }\n            }\n          }\n\n          if (researcher.research_description != null) {\n            var descriptionEn = researcher.research_description.research_description.en;\n            var descriptionFr = researcher.research_description.research_description.fr;\n\n            if (descriptionEn) {\n              for (var token of tokenizeString(descriptionEn)) {\n                terms.add(token);\n              }\n            }\n\n            if (descriptionFr) {\n              for (var token of tokenizeString(descriptionFr)) {\n                terms.add(token);\n              }\n            }\n          }\n\n          if (researcher.selected_publications != null) {\n            var articles = researcher.selected_publications.journal_articles[0].article_title;\n\n            if (articles) {\n              for (var token of tokenizeString(articles)) {\n                terms.add(token);\n              }\n            }\n          }\n\n          if (researcher.research_funding_history != null) {\n            var fundingTitle = researcher.research_funding_history[0].funding_title;\n\n            if (fundingTitle) {\n              for (var token of tokenizeString(fundingTitle)) {\n                terms.add(token);\n              }\n            }\n\n            if (researcher.research_funding_history[0].project_description != null) {\n              var fundingDescriptionEn = researcher.research_funding_history[0].project_description.english;\n              var fundingDescriptionFr = researcher.research_funding_history[0].project_description.french;\n\n              if (fundingDescriptionEn) {\n                for (var token of tokenizeString(fundingDescriptionEn)) {\n                  terms.add(token);\n                }\n              }\n\n              if (fundingDescriptionFr) {\n                for (var token of tokenizeString(fundingDescriptionFr)) {\n                  terms.add(token);\n                }\n              }\n            }\n          }\n\n          for (var term of terms) {\n            try {\n              if (researcherList['tss_'+term]) {\n              //if term exist in array of set\n                researcherList['tss_'+term].add(researcher);\n              } else {\n                researcherList['tss_'+term] = new Set([researcher]);\n              }\n            } catch (error) {\n                console.log('an error occurred ' + error);\n                console.log(term);\n            }\n          }\n        }//end loop through researchers\n\n        resolve(researcherList);\n        //return researcherList;\n      });\n    },\n\n    buildSearchterms: function() {\n      //set variable for freeText array\n      var searchTerms = [];\n      //grab text from input. Split comma-separated input box values into array\n      var searchTerms = $('#freeTextSearch').val();\n      var searchTermsTokenized = tokenizeString(searchTerms);\n      return searchTermsTokenized;\n    },\n\n    onFilterFreetext: function() {\n      this.researchersFiltered = this.onRefreshSearch();\n      this.extractAlphaFilter();\n    },\n\n    onFilterFreetextClear: function() {\n      $('#freeTextSearch').val('');\n      this.researchersFiltered = this.onRefreshSearch();\n      this.extractAlphaFilter();\n    },\n\n    translateMonths: function(EnglishMonth) {\n      // Brute force because we're only calling this twelve times.\n      return EnglishMonth.replace(\"Feb\",\"fv\").replace(\"Apr\",\"avr\").replace(\"May\",\"mai\").replace(\"Aug\",\"ao\").replace(\"Dec\",\"dc\").toLowerCase();\n    },\n\n    translateLevelOfInstruction: function(level_of_instruction) {\n      switch (level_of_instruction) {\n        case \"msc\":\n          return this.$t(\"message.MSC\");\n\n        case \"phd\":\n          return this.$t(\"message.PHD\");\n\n        default:\n          return level_of_instruction;\n      }\n    },\n\n    findInJson: function(jsonArray,code,lang) {\n      for (var jsonObject of jsonArray) {\n        if (jsonObject.code == code && jsonObject.lang == lang) {\n          return jsonObject.name;\n        }\n      }\n      return \"\";\n    },\n\n    filterAlphabetical: function(letterOfAlphabet) {\n      // Possible refactor: replace this.researchersFiltered with a list of lists, populated in extractAlphaFilter\n      // e.g. \"['A':[researcher, researcher, researcher],'B':[researcher, researcher],...,'Z':[]\"\n      // and then we don't need this function.\n      var returnList = [];\n      for (var researcher of this.researchersFiltered) {\n        if (researcher.membership_information.last_name.charAt(0) == letterOfAlphabet) {\n          returnList.push(researcher);\n        }\n      }\n      return returnList;\n    }\n  } //end methods\n})\n"]}